<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>payton.scene.geometry API documentation</title>
    <meta name="description" content="Payton main geometry module

Geometry module holds the basic geometry shapes. They are all inherited..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">


    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Cube">Cube</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Cube.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cube.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Cylinder">Cylinder</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.build_cylinder">build_cylinder</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Cylinder.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Joint">Joint</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Joint.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.build_sphere">build_sphere</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Joint.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Line">Line</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Line.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.append">append</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.build_lines">build_lines</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Line.update_matrix">update_matrix</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.MD2">MD2</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.MD2.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.animate">animate</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.build_frame">build_frame</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.compile">compile</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.load_buffer">load_buffer</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.load_file">load_file</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.load_frames">load_frames</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.read_frame">read_frame</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.read_header">read_header</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.read_skin">read_skin</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.read_tex_coords">read_tex_coords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.read_triangles">read_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MD2.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.MatrixPlane">MatrixPlane</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.populate_grid">populate_grid</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.update_grid">update_grid</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.MatrixPlane.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Mesh">Mesh</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Mesh.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Object">Object</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Object.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Object.update_matrix">update_matrix</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Plane">Plane</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Plane.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Plane.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.PointCloud">PointCloud</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.add">add</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.PointCloud.update_matrix">update_matrix</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.RagDoll">RagDoll</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.append">append</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.build_lines">build_lines</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.connect_to_end">connect_to_end</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.connect_to_root">connect_to_root</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.setup_geometry">setup_geometry</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.setup_joints">setup_joints</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.RagDoll.update_matrix">update_matrix</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Sphere">Sphere</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.build_sphere">build_sphere</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Sphere.from_json">from_json</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#payton.scene.geometry.Wavefront">Wavefront</a></span>
        
          
  <ul>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.__init__">__init__</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.absolute_vertices">absolute_vertices</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.add_child">add_child</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.add_material">add_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.add_triangle">add_triangle</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.build">build</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.clear_triangles">clear_triangles</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.destroy">destroy</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.direct_to">direct_to</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.fix_normals">fix_normals</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.fix_texcoords">fix_texcoords</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.forward">forward</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.hide">hide</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.load">load</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.load_file">load_file</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.load_material">load_material</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.load_material_file">load_material_file</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.refresh">refresh</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.render">render</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.rotate_around_x">rotate_around_x</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.rotate_around_y">rotate_around_y</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.rotate_around_z">rotate_around_z</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.scale">scale</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.select">select</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.show">show</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.step_back">step_back</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.to_absolute">to_absolute</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.to_dict">to_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.to_json">to_json</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.toggle_wireframe">toggle_wireframe</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.track">track</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.update_matrix">update_matrix</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.from_dict">from_dict</a></li>
    <li class="mono"><a href="#payton.scene.geometry.Wavefront.from_json">from_json</a></li>
  </ul>

        </li>
      </ul>
    </li>

    <li class="set"><h3><a href="#header-submodules">Sub-modules</a></h3>
      <ul>
        <li class="mono"><a href="base.m.html">payton.scene.geometry.base</a></li>
        <li class="mono"><a href="cube.m.html">payton.scene.geometry.cube</a></li>
        <li class="mono"><a href="cylinder.m.html">payton.scene.geometry.cylinder</a></li>
        <li class="mono"><a href="export.m.html">payton.scene.geometry.export</a></li>
        <li class="mono"><a href="md2.m.html">payton.scene.geometry.md2</a></li>
        <li class="mono"><a href="mesh.m.html">payton.scene.geometry.mesh</a></li>
        <li class="mono"><a href="plane.m.html">payton.scene.geometry.plane</a></li>
        <li class="mono"><a href="point.m.html">payton.scene.geometry.point</a></li>
        <li class="mono"><a href="ragdoll.m.html">payton.scene.geometry.ragdoll</a></li>
        <li class="mono"><a href="sphere.m.html">payton.scene.geometry.sphere</a></li>
        <li class="mono"><a href="wavefront.m.html">payton.scene.geometry.wavefront</a></li>
      </ul>
    </li>
    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">payton.scene.geometry</span> module</h1>
  <p>Payton main geometry module</p>
<p>Geometry module holds the basic geometry shapes. They are all inherited
from <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a> class. They are as simple as possible.</p>
<p>Their face informations are generated at the initialization but vertex array
object is not generated until it arrives in render pipeline.</p>
<ul>
<li>Object</li>
<li>Material (<code>payton.scene.material</code>)<ul>
<li>Shader (<code>payton.scene.shader</code>)</li>
</ul>
</li>
</ul>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry" class="source">
    <div class="codehilite"><pre><span></span><span class="c1"># pylama:ignore=W</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Payton main geometry module</span>

<span class="sd">Geometry module holds the basic geometry shapes. They are all inherited</span>
<span class="sd">from `payton.scene.geometry.base.Object` class. They are as simple as possible.</span>

<span class="sd">Their face informations are generated at the initialization but vertex array</span>
<span class="sd">object is not generated until it arrives in render pipeline.</span>

<span class="sd">* Object</span>
<span class="sd">  * Material (`payton.scene.material`)</span>
<span class="sd">    * Shader (`payton.scene.shader`)</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.base</span> <span class="kn">import</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Object</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.cube</span> <span class="kn">import</span> <span class="n">Cube</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.cylinder</span> <span class="kn">import</span> <span class="n">Cylinder</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.md2</span> <span class="kn">import</span> <span class="n">MD2</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.mesh</span> <span class="kn">import</span> <span class="n">Mesh</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.plane</span> <span class="kn">import</span> <span class="n">MatrixPlane</span><span class="p">,</span> <span class="n">Plane</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.point</span> <span class="kn">import</span> <span class="n">PointCloud</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.ragdoll</span> <span class="kn">import</span> <span class="n">Joint</span><span class="p">,</span> <span class="n">RagDoll</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.sphere</span> <span class="kn">import</span> <span class="n">Sphere</span>
<span class="kn">from</span> <span class="nn">payton.scene.geometry.wavefront</span> <span class="kn">import</span> <span class="n">Wavefront</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Line&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Mesh&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Cylinder&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Cube&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Plane&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MatrixPlane&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Sphere&quot;</span><span class="p">,</span>
    <span class="s2">&quot;PointCloud&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MD2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Wavefront&quot;</span><span class="p">,</span>
    <span class="s2">&quot;RagDoll&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Joint&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">


    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="payton.scene.geometry.Cube" class="name">class <span class="ident">Cube</span></p>
      
  
    <div class="desc"><p>Cube object</p>
<p>This is a simple Cube object with width, height and depth.</p>
<p>Cube object use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">02</span><span class="nv">_cube</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Cube</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cube object</span>

<span class="sd">    This is a simple Cube object with width, height and depth.</span>

<span class="sd">    Cube object use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/02_cube.py</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">depth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">from_corner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">to_corner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize Cube</span>

<span class="sd">        There are two ways to initialize a cube. You can use width, depth,</span>
<span class="sd">        height properties or you can specify two distant corners in space</span>
<span class="sd">        as `from_corner` and `to_corner`.</span>

<span class="sd">        Specifiying corners overwrites width, depth and height.</span>

<span class="sd">        Args:</span>
<span class="sd">          width: Width of the cube (size X)</span>
<span class="sd">          depth: Depth of the cube (size Y)</span>
<span class="sd">          height: Height of the cube (size Z)</span>
<span class="sd">          from_corner: Starting point of the cube (Optional)</span>
<span class="sd">          to_corner: End point of the cube (Optional)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">*=</span> <span class="mf">0.5</span>
        <span class="n">depth</span> <span class="o">*=</span> <span class="mf">0.5</span>
        <span class="n">height</span> <span class="o">*=</span> <span class="mf">0.5</span>

        <span class="k">if</span> <span class="n">from_corner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">to_corner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">([</span><span class="n">from_corner</span><span class="p">,</span> <span class="n">to_corner</span><span class="p">])</span>

            <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">depth</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span>
                <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">depth</span><span class="p">,</span>
                <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">height</span><span class="p">,</span>
            <span class="p">]</span>

        <span class="n">_vertices</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
        <span class="p">]</span>

        <span class="n">_normals</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">]</span>

        <span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">]</span>

        <span class="n">_faces</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
            <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
        <span class="p">]</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">_faces</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
                <span class="n">l_vertex</span> <span class="o">=</span> <span class="n">_vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="n">l_normal</span> <span class="o">=</span> <span class="n">_normals</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                <span class="n">l_tex</span> <span class="o">=</span> <span class="n">_texcoords</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_vertex</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_normal</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_tex</span><span class="p">)</span>
                <span class="n">ind</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span>

        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Cube">Cube</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, width=1.0, depth=1.0, height=1.0, from_corner=None, to_corner=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize Cube</p>
<p>There are two ways to initialize a cube. You can use width, depth,
height properties or you can specify two distant corners in space
as <code>from_corner</code> and <code>to_corner</code>.</p>
<p>Specifiying corners overwrites width, depth and height.</p>
<p>Args:
  width: Width of the cube (size X)
  depth: Depth of the cube (size Y)
  height: Height of the cube (size Z)
  from_corner: Starting point of the cube (Optional)
  to_corner: End point of the cube (Optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">depth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">from_corner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">to_corner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize Cube</span>
<span class="sd">    There are two ways to initialize a cube. You can use width, depth,</span>
<span class="sd">    height properties or you can specify two distant corners in space</span>
<span class="sd">    as `from_corner` and `to_corner`.</span>
<span class="sd">    Specifiying corners overwrites width, depth and height.</span>
<span class="sd">    Args:</span>
<span class="sd">      width: Width of the cube (size X)</span>
<span class="sd">      depth: Depth of the cube (size Y)</span>
<span class="sd">      height: Height of the cube (size Z)</span>
<span class="sd">      from_corner: Starting point of the cube (Optional)</span>
<span class="sd">      to_corner: End point of the cube (Optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">*=</span> <span class="mf">0.5</span>
    <span class="n">depth</span> <span class="o">*=</span> <span class="mf">0.5</span>
    <span class="n">height</span> <span class="o">*=</span> <span class="mf">0.5</span>
    <span class="k">if</span> <span class="n">from_corner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">to_corner</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">([</span><span class="n">from_corner</span><span class="p">,</span> <span class="n">to_corner</span><span class="p">])</span>
        <span class="n">width</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span>
            <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">depth</span><span class="p">,</span>
            <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">height</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="n">_vertices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="n">height</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="n">_normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">1.00</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.666666</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.000000</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">1.000000</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.333333</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="n">_faces</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">]],</span>
        <span class="p">[[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">]],</span>
    <span class="p">]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">_faces</span><span class="p">:</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
            <span class="n">l_vertex</span> <span class="o">=</span> <span class="n">_vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">l_normal</span> <span class="o">=</span> <span class="n">_normals</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
            <span class="n">l_tex</span> <span class="o">=</span> <span class="n">_texcoords</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_vertex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_normal</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_tex</span><span class="p">)</span>
            <span class="n">ind</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span>
    <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Cube.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Mesh">Mesh</a></code>.<code><a href="#payton.scene.geometry.Mesh.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cube.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cube.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cube.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cube.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cube.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cube.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cube.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cube.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Cylinder" class="name">class <span class="ident">Cylinder</span></p>
      
  
    <div class="desc"><p>Cylinder Object</p>
<p>Beware of using high values for number of meridians. You might end up with
excessive number of vertices to render.</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">18</span><span class="nv">_cylinder</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Cylinder</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Cylinder Object</span>

<span class="sd">    Beware of using high values for number of meridians. You might end up with</span>
<span class="sd">    excessive number of vertices to render.</span>

<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/18_cylinder.py</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bottom_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">top_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iniitalize the cylinder</span>

<span class="sd">        Args:</span>
<span class="sd">          bottom_radius: Radius at the bottom of the cylinder</span>
<span class="sd">          top_radius: Radius at the top of the cylinder</span>
<span class="sd">          meridians: Number of meridians/edges (as in geography)</span>
<span class="sd">          height: Height of the cylinder</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bottom_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">bottom_radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_top_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">top_radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">meridians</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_cylinder</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">build_cylinder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">step_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">360</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">)</span>

        <span class="n">u_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span>
        <span class="n">r_bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom_radius</span>
        <span class="n">r_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top_radius</span>
        <span class="n">h_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">):</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>

            <span class="n">u1</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">i</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">u2</span> <span class="o">=</span> <span class="n">u1</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="mf">0.0</span>

            <span class="n">x3</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">y3</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">x4</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">y4</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>

            <span class="n">u3</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">v3</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="n">u4</span> <span class="o">=</span> <span class="n">u3</span>
            <span class="n">v4</span> <span class="o">=</span> <span class="mf">0.0</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
                <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">],</span> <span class="p">[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
                <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span> <span class="p">[</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">]],</span>
                <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">]],</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
                <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Cylinder">Cylinder</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, bottom_radius=0.5, top_radius=0.5, meridians=12, height=1.0, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Iniitalize the cylinder</p>
<p>Args:
  bottom_radius: Radius at the bottom of the cylinder
  top_radius: Radius at the top of the cylinder
  meridians: Number of meridians/edges (as in geography)
  height: Height of the cylinder</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">bottom_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">top_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Iniitalize the cylinder</span>
<span class="sd">    Args:</span>
<span class="sd">      bottom_radius: Radius at the bottom of the cylinder</span>
<span class="sd">      top_radius: Radius at the top of the cylinder</span>
<span class="sd">      meridians: Number of meridians/edges (as in geography)</span>
<span class="sd">      height: Height of the cylinder</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_bottom_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">bottom_radius</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_top_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">top_radius</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">meridians</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_cylinder</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.build_cylinder">
    <p>def <span class="ident">build_cylinder</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.build_cylinder', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.build_cylinder" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_cylinder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="n">step_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">360</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">)</span>
    <span class="n">u_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span>
    <span class="n">r_bot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bottom_radius</span>
    <span class="n">r_top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_top_radius</span>
    <span class="n">h_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_height</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meridians</span><span class="p">):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">u1</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">x3</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">y3</span> <span class="o">=</span> <span class="n">r_bot</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">x4</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">y4</span> <span class="o">=</span> <span class="n">r_top</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">u4</span> <span class="o">=</span> <span class="n">u3</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
            <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">],</span> <span class="p">[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
            <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span> <span class="p">[</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="o">-</span><span class="n">h_2</span><span class="p">]],</span>
            <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
            <span class="p">[[</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">h_2</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">h_2</span><span class="p">]],</span>
            <span class="n">texcoords</span><span class="o">=</span><span class="p">[[</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">]],</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Mesh">Mesh</a></code>.<code><a href="#payton.scene.geometry.Mesh.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Cylinder.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Cylinder.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Cylinder.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Cylinder.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Joint" class="name">class <span class="ident">Joint</span></p>
      
  
    <div class="desc"><p>Joint object definition</p>
<p>Joints are basically moving parts of a bone. For each
bone, there is a starting (root) and end Joint.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Joint</span><span class="p">(</span><span class="n">Sphere</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Joint object definition</span>

<span class="sd">    Joints are basically moving parts of a bone. For each</span>
<span class="sd">    bone, there is a starting (root) and end Joint.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">WIREFRAME</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_sphere</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Joint">Joint</a></li>
          <li><a href="#payton.scene.geometry.Sphere">Sphere</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the sphere</p>
<p>Args:
  radius: Radius of the sphere (default: 0.5, making it a unit sphere)
  parallels: Number of parallels (as in geography). (default: 12, 30
             degrees of arcs)
  meridians: Number of meridians (as in geography). (default: 12)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">WIREFRAME</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_sphere</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.build_sphere">
    <p>def <span class="ident">build_sphere</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate the sphere</p>
<p>Returns:
  bool: <code>True</code> on successful creation of a <code>Sphere</code> object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.build_sphere', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.build_sphere" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_sphere</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the sphere</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: `True` on successful creation of a `Sphere` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
    <span class="c1"># step angle is the rotational angle to build the sphere</span>
    <span class="n">step_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">360.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)</span>
    <span class="c1"># step height is the arc in height</span>
    <span class="n">step_height</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">180.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">u_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span>
    <span class="n">v_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_triangles</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">r</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">y3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">r</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">z3</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">y4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">z4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">u4</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">z4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">indices</span> <span class="o">+=</span> <span class="mi">4</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Joint.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            

            
  
    <div class="desc"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.radius" class="name">var <span class="ident">radius</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Joint.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Joint.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Joint.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Joint.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Line" class="name">class <span class="ident">Line</span></p>
      
  
    <div class="desc"><p>Line object</p>
<p>Exceptionally, due to hard reference for motion path feature, this class
is defined in base.py instead of line.py</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Line object</span>

<span class="sd">    Exceptionally, due to hard reference for motion path feature, this class</span>
<span class="sd">    is defined in base.py instead of line.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Iniitalize line</span>

<span class="sd">        Args:</span>
<span class="sd">          vertices: Vertices array for list of points.</span>
<span class="sd">          color: Color of the line</span>

<span class="sd">        Example use case:</span>

<span class="sd">            .. include:: ../../../examples/basics/17_line.py</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">vertices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span> <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">color</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Do not clear the vertices each time.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">WIREFRAME</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_lines</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Toggle Wireframe overwrite to disable mode change&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;@TODO Implement this later! Not urgent&quot;&quot;&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add materials to Line object&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Append vertex or vertices to line.</span>

<span class="sd">        Args:</span>
<span class="sd">          vertices: Vertex array of points.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>  <span class="c1"># Number of vertices added</span>
        <span class="n">last_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>

        <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">last_index</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">diff</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">indices</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">build_lines</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Build lines</span>

<span class="sd">        Build line vertex array object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">vertices</span>
        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span><span class="p">:</span>
            <span class="c1"># This is a dynamic object, destroying the object is not a good</span>
            <span class="c1"># idea so we just update the buffer here.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Line">Line</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, vertices=None, color=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Iniitalize line</p>
<p>Args:
  vertices: Vertices array for list of points.
  color: Color of the line</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">17</span><span class="nv">_line</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Iniitalize line</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices array for list of points.</span>
<span class="sd">      color: Color of the line</span>
<span class="sd">    Example use case:</span>
<span class="sd">        .. include:: ../../../examples/basics/17_line.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">vertices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span> <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Do not clear the vertices each time.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">WIREFRAME</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_lines</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>@TODO Implement this later! Not urgent</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;@TODO Implement this later! Not urgent&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add materials to Line object&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.append">
    <p>def <span class="ident">append</span>(</p><p>self, vertices, material=&#39;default&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Append vertex or vertices to line.</p>
<p>Args:
  vertices: Vertex array of points.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.append', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.append" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Append vertex or vertices to line.</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertex array of points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>  <span class="c1"># Number of vertices added</span>
    <span class="n">last_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">last_index</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">diff</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">indices</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.build_lines">
    <p>def <span class="ident">build_lines</span>(</p><p>self, vertices=None, color=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Build lines</p>
<p>Build line vertex array object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.build_lines', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.build_lines" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_lines</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Build lines</span>
<span class="sd">    Build line vertex array object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">vertices</span>
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span><span class="p">:</span>
        <span class="c1"># This is a dynamic object, destroying the object is not a good</span>
        <span class="c1"># idea so we just update the buffer here.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle Wireframe overwrite to disable mode change</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle Wireframe overwrite to disable mode change&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Line.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Line.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Line.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Line.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Line.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Line.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Line.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Line.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Line.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.MD2" class="name">class <span class="ident">MD2</span></p>
      
  
    <div class="desc"><p>MD2 File Format Loader
I know that this is a pretty old file format. We can consider it as ancient
On the other hand, our target on creating Payton is not to make a game
engine.</p>
<p>Also note that there might be some bugs, I give no guarantee here.
As this is a generic class, I haven't defined any animations before hand.
So to make things properly looping in your code, you need to set the
animation frame ranges yourself. For instance, as you will see at the
defined example, infantry has a perfect walking loop between frames 2-13</p>
<p>Unlike original frame names, frames in this class starts from 0 and goes
incremented by one.</p>
<p>NOTE: There are some hard-coded pre-assumptions like the scale of the
objects and they are just defined to look okay on a default scene.</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">26</span><span class="nv">_quake2</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MD2</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    MD2 File Format Loader</span>
<span class="sd">    I know that this is a pretty old file format. We can consider it as ancient</span>
<span class="sd">    On the other hand, our target on creating Payton is not to make a game</span>
<span class="sd">    engine.</span>

<span class="sd">    Also note that there might be some bugs, I give no guarantee here.</span>
<span class="sd">    As this is a generic class, I haven&#39;t defined any animations before hand.</span>
<span class="sd">    So to make things properly looping in your code, you need to set the</span>
<span class="sd">    animation frame ranges yourself. For instance, as you will see at the</span>
<span class="sd">    defined example, infantry has a perfect walking loop between frames 2-13</span>

<span class="sd">    Unlike original frame names, frames in this class starts from 0 and goes</span>
<span class="sd">    incremented by one.</span>

<span class="sd">    NOTE: There are some hard-coded pre-assumptions like the scale of the</span>
<span class="sd">    objects and they are just defined to look okay on a default scene.</span>

<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/26_quake2.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initialize the MD2 Object</span>

<span class="sd">        Args:</span>
<span class="sd">          filename: Filename to load</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">:</span> <span class="n">MD2Header</span> <span class="o">=</span> <span class="n">MD2Header</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span> <span class="o">=</span> <span class="n">MD2TriangleLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">skins</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MD2Frame</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">animation_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">from_frame</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">to_frame</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">loop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the model in motion</span>

<span class="sd">        Args:</span>
<span class="sd">          animation_name: Name of the animation to play</span>
<span class="sd">          from_frame: Loop starting frame</span>
<span class="sd">          to_frame: Loop ending frame</span>
<span class="sd">          loop: Loop the animation?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># For thread safety</span>
        <span class="k">if</span> <span class="n">animation_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Animation {animation_name} not found in object&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">anim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">animation_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">from_frame</span> <span class="o">&lt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">from_frame</span> <span class="o">&gt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;from_frame out of bounds&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">&lt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">to_frame</span> <span class="o">&gt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;to_frame out of bounds&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">loop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">=</span> <span class="n">from_frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span> <span class="o">=</span> <span class="n">from_frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span> <span class="o">=</span> <span class="n">to_frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">=</span> <span class="n">animation_name</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
        <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
                <span class="p">)</span>
                <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="n">tdiff</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">tdiff</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">-=</span> <span class="mi">1</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>

        <span class="n">frame_name</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{self.animation}{self._active_frame}&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">frame_name</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
            <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found: {filename}&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_buffer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_header</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_skin</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_tex_coords</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_triangles</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_frames</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">read_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_tris</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
        <span class="n">triangles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 6H&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_tris</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span>
        <span class="p">)</span>
        <span class="n">triangles</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">vertex_indices</span> <span class="o">=</span> <span class="n">triangles</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">tc_indices</span> <span class="o">=</span> <span class="n">triangles</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span> <span class="o">=</span> <span class="n">MD2TriangleLayout</span><span class="p">(</span>
            <span class="n">vertex_indices</span><span class="o">=</span><span class="n">vertex_indices</span><span class="p">,</span> <span class="n">tc_indices</span><span class="o">=</span><span class="n">tc_indices</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animations</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">frame_name</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{name}{num}&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">build_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_information</span><span class="p">:</span> <span class="n">MD2Frame</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tri</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">vertex_indices</span><span class="p">):</span>
            <span class="n">v3</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]]</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
            <span class="n">mesh</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
                <span class="n">vertices</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span>
                <span class="n">normals</span><span class="o">=</span><span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">],</span>
                <span class="n">texcoords</span><span class="o">=</span><span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">],</span>
            <span class="p">)</span>

        <span class="n">mesh</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skins</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">MD2Header</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 4s16l&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">ident</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">_SIGNATURE</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s2">&quot;MD2 Identifier is incorrect&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">version</span> <span class="o">!=</span> <span class="n">_VERSION</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s2">&quot;Invalid Version&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">read_skin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_skins</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
        <span class="n">skin_struct</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">Struct</span><span class="p">(</span><span class="s2">&quot;&lt; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;64s&quot;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_skins</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">skins</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">fix_skin_name</span><span class="p">(</span><span class="n">skin</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">skin</span> <span class="ow">in</span> <span class="n">skin_struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">skin_struct</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">read_tex_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_st</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
        <span class="n">tcs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 2h&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_st</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span>
        <span class="p">)</span>
        <span class="n">tcs</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">tcs</span> <span class="o">/=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">skin_width</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">skin_height</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">tcs</span>

    <span class="k">def</span> <span class="nf">load_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_frames</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">read_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
        <span class="n">frame_translations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 3f&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">frame_translations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">translation</span> <span class="o">=</span> <span class="n">frame_translations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">name</span> <span class="o">=</span> <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 16s&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="n">frame_vertex_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt;4B&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_vertices</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span>
        <span class="p">)</span>

        <span class="n">frame_vertex_data</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">vertices_short</span> <span class="o">=</span> <span class="n">frame_vertex_data</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">vertices_short</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
        <span class="n">vertices</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">vertices</span> <span class="o">*=</span> <span class="n">scale</span>
        <span class="n">vertices</span> <span class="o">+=</span> <span class="p">(</span><span class="n">translation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">translation</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">vertices</span> <span class="o">/=</span> <span class="mf">20.0</span>

        <span class="k">return</span> <span class="n">MD2Frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.MD2">MD2</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, filename=&#39;&#39;, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the MD2 Object</p>
<p>Args:
  filename: Filename to load</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Initialize the MD2 Object</span>
<span class="sd">    Args:</span>
<span class="sd">      filename: Filename to load</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">:</span> <span class="n">MD2Header</span> <span class="o">=</span> <span class="n">MD2Header</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span> <span class="o">=</span> <span class="n">MD2TriangleLayout</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">skins</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MD2Frame</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">animation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.animate">
    <p>def <span class="ident">animate</span>(</p><p>self, animation_name, from_frame, to_frame, loop=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the model in motion</p>
<p>Args:
  animation_name: Name of the animation to play
  from_frame: Loop starting frame
  to_frame: Loop ending frame
  loop: Loop the animation?</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.animate', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.animate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">animate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">animation_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">from_frame</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">to_frame</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">loop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the model in motion</span>
<span class="sd">    Args:</span>
<span class="sd">      animation_name: Name of the animation to play</span>
<span class="sd">      from_frame: Loop starting frame</span>
<span class="sd">      to_frame: Loop ending frame</span>
<span class="sd">      loop: Loop the animation?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>  <span class="c1"># For thread safety</span>
    <span class="k">if</span> <span class="n">animation_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Animation {animation_name} not found in object&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">anim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">animation_name</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">from_frame</span> <span class="o">&lt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">from_frame</span> <span class="o">&gt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;from_frame out of bounds&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">to_frame</span> <span class="o">&lt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">to_frame</span> <span class="o">&gt;</span> <span class="n">anim</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;to_frame out of bounds&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span> <span class="o">=</span> <span class="n">loop</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">=</span> <span class="n">from_frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span> <span class="o">=</span> <span class="n">from_frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span> <span class="o">=</span> <span class="n">to_frame</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">=</span> <span class="n">animation_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.build_frame">
    <p>def <span class="ident">build_frame</span>(</p><p>self, frame_information, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.build_frame', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.build_frame" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame_information</span><span class="p">:</span> <span class="n">MD2Frame</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tri</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">vertex_indices</span><span class="p">):</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">frame_information</span><span class="o">.</span><span class="n">vertices</span><span class="p">[</span><span class="n">tri</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="n">t3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">t2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">t1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span><span class="o">.</span><span class="n">tc_indices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">mesh</span><span class="o">.</span><span class="n">add_triangle</span><span class="p">(</span>
            <span class="n">vertices</span><span class="o">=</span><span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">],</span>
            <span class="n">normals</span><span class="o">=</span><span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">],</span>
            <span class="n">texcoords</span><span class="o">=</span><span class="p">[</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">],</span>
        <span class="p">)</span>
    <span class="n">mesh</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skins</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.compile">
    <p>def <span class="ident">compile</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.compile', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.compile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">animations</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">frames</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">isdigit</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">num</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">animations</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">frame_name</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{name}{num}&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.load_buffer">
    <p>def <span class="ident">load_buffer</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.load_buffer', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.load_buffer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">read_header</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">read_skin</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">read_tex_coords</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">read_triangles</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load_frames</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">compile</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.load_file">
    <p>def <span class="ident">load_file</span>(</p><p>self, filename)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.load_file', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.load_file" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found: {filename}&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_buffer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.load_frames">
    <p>def <span class="ident">load_frames</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.load_frames', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.load_frames" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_frames</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_frames</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">frames</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_frames</span><span class="p">)</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.read_frame">
    <p>def <span class="ident">read_frame</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.read_frame', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.read_frame" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="n">frame_translations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 3f&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
    <span class="n">scale</span> <span class="o">=</span> <span class="n">frame_translations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">translation</span> <span class="o">=</span> <span class="n">frame_translations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 16s&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x00</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">frame_vertex_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt;4B&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_vertices</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span>
    <span class="p">)</span>
    <span class="n">frame_vertex_data</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="n">vertices_short</span> <span class="o">=</span> <span class="n">frame_vertex_data</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">vertices_short</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">)</span>
    <span class="n">vertices</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">*=</span> <span class="n">scale</span>
    <span class="n">vertices</span> <span class="o">+=</span> <span class="p">(</span><span class="n">translation</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">translation</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">vertices</span> <span class="o">/=</span> <span class="mf">20.0</span>
    <span class="k">return</span> <span class="n">MD2Frame</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="n">vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.read_header">
    <p>def <span class="ident">read_header</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.read_header', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.read_header" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">MD2Header</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 4s16l&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">ident</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">_SIGNATURE</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s2">&quot;MD2 Identifier is incorrect&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">version</span> <span class="o">!=</span> <span class="n">_VERSION</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">BaseException</span><span class="p">(</span><span class="s2">&quot;Invalid Version&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.read_skin">
    <p>def <span class="ident">read_skin</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.read_skin', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.read_skin" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_skin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_skins</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
    <span class="n">skin_struct</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">Struct</span><span class="p">(</span><span class="s2">&quot;&lt; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;64s&quot;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_skins</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">skins</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">fix_skin_name</span><span class="p">(</span><span class="n">skin</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">skin</span> <span class="ow">in</span> <span class="n">skin_struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">skin_struct</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.read_tex_coords">
    <p>def <span class="ident">read_tex_coords</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.read_tex_coords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.read_tex_coords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_tex_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_st</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
    <span class="n">tcs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 2h&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_st</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float</span>
    <span class="p">)</span>
    <span class="n">tcs</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">tcs</span> <span class="o">/=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">skin_width</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">skin_height</span><span class="p">)]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">tcs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.read_triangles">
    <p>def <span class="ident">read_triangles</span>(</p><p>self, f)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.read_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.read_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="n">BinaryIO</span><span class="p">):</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">offset_tris</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">SEEK_SET</span><span class="p">)</span>
    <span class="n">triangles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">read_block</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;&lt; 6H&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="o">.</span><span class="n">num_tris</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint16</span>
    <span class="p">)</span>
    <span class="n">triangles</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="n">vertex_indices</span> <span class="o">=</span> <span class="n">triangles</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">tc_indices</span> <span class="o">=</span> <span class="n">triangles</span><span class="p">[:,</span> <span class="mi">3</span><span class="p">:]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">triangle_layout</span> <span class="o">=</span> <span class="n">MD2TriangleLayout</span><span class="p">(</span>
        <span class="n">vertex_indices</span><span class="o">=</span><span class="n">vertex_indices</span><span class="p">,</span> <span class="n">tc_indices</span><span class="o">=</span><span class="n">tc_indices</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">animation</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
            <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">tdiff</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tdiff</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_frame_rate</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_frame</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_from_frame</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_active_frame</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="n">frame_name</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{self.animation}{self._active_frame}&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">frame_name</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
        <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.MD2.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            

            
  
    <div class="desc"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.triangle_layout" class="name">var <span class="ident">triangle_layout</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MD2.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MD2.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MD2.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MD2.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.MatrixPlane" class="name">class <span class="ident">MatrixPlane</span></p>
      
  
    <div class="desc"><p>Grid plane is a special plane which is generated by a NxM matrix and you
can modify the z values by <code>.grid</code> list</p>
<p>This is quite handy if you want to create a planar animation/simulation</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">mid</span><span class="o">-</span><span class="nv">level</span><span class="o">/</span><span class="nv">ripple</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MatrixPlane</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Grid plane is a special plane which is generated by a NxM matrix and you</span>
<span class="sd">    can modify the z values by `.grid` list</span>

<span class="sd">    This is quite handy if you want to create a planar animation/simulation</span>

<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/mid-level/ripple.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">y</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize MatrixPlane</span>

<span class="sd">        Args:</span>
<span class="sd">          x: Number of control points along X axis</span>
<span class="sd">          y: Number of control points along Y axis</span>
<span class="sd">          width: Total width</span>
<span class="sd">          height: Total height</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">populate_grid</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">populate_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Turn grid data into plane&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_triangles</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>

        <span class="n">step_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">step_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">step_u</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">step_v</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">c_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">c_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">step_x</span><span class="p">)</span> <span class="o">-</span> <span class="n">c_x</span><span class="p">,</span> <span class="p">(</span><span class="n">j</span> <span class="o">*</span> <span class="n">step_y</span><span class="p">)</span> <span class="o">-</span> <span class="n">c_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">*</span> <span class="n">step_u</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">step_v</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">left</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span>
                <span class="n">right</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="n">top_left</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="n">j</span>
                <span class="n">top_right</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">top_right</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">top_right</span><span class="p">,</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">left</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.MatrixPlane">MatrixPlane</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, width=1.0, height=1.0, x=2, y=2, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize MatrixPlane</p>
<p>Args:
  x: Number of control points along X axis
  y: Number of control points along Y axis
  width: Total width
  height: Total height</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize MatrixPlane</span>
<span class="sd">    Args:</span>
<span class="sd">      x: Number of control points along X axis</span>
<span class="sd">      y: Number of control points along Y axis</span>
<span class="sd">      width: Total width</span>
<span class="sd">      height: Total height</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">populate_grid</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.populate_grid">
    <p>def <span class="ident">populate_grid</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn grid data into plane</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.populate_grid', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.populate_grid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">populate_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Turn grid data into plane&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_triangles</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>
    <span class="n">step_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">step_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">step_u</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">step_v</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">c_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="n">c_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">step_x</span><span class="p">)</span> <span class="o">-</span> <span class="n">c_x</span><span class="p">,</span> <span class="p">(</span><span class="n">j</span> <span class="o">*</span> <span class="n">step_y</span><span class="p">)</span> <span class="o">-</span> <span class="n">c_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span> <span class="o">*</span> <span class="n">step_u</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">step_v</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span>
            <span class="n">right</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">top_left</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="n">j</span>
            <span class="n">top_right</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">+</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">top_right</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">top_right</span><span class="p">,</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">left</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.update_grid">
    <p>def <span class="ident">update_grid</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.update_grid', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.update_grid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            

            
  
    <div class="desc"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.height" class="name">var <span class="ident">height</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.width" class="name">var <span class="ident">width</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.x" class="name">var <span class="ident">x</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.MatrixPlane.y" class="name">var <span class="ident">y</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.MatrixPlane.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.MatrixPlane.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.MatrixPlane.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Mesh" class="name">class <span class="ident">Mesh</span></p>
      
  
    <div class="desc"><p>Mesh Object</p>
<p>Mesh is almost like the Object except with some extra methods to make
things easier. If you want to have custom geometries/shapes, it is
better to extend <a href="mesh.m.html#payton.scene.geometry.mesh.Mesh"><code>payton.scene.geometry.mesh.Mesh</code></a> instead of
<a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a>. Because Mesh will give you better
and easier constructing capabilities such as adding triangles on the fly
or sub-division or cutting and so forth. It is a way of designing objects
by code.</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">09</span><span class="nv">_mesh</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Mesh</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Mesh Object</span>

<span class="sd">    Mesh is almost like the Object except with some extra methods to make</span>
<span class="sd">    things easier. If you want to have custom geometries/shapes, it is</span>
<span class="sd">    better to extend `payton.scene.geometry.mesh.Mesh` instead of</span>
<span class="sd">    `payton.scene.geometry.base.Object`. Because Mesh will give you better</span>
<span class="sd">    and easier constructing capabilities such as adding triangles on the fly</span>
<span class="sd">    or sub-division or cutting and so forth. It is a way of designing objects</span>
<span class="sd">    by code.</span>


<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/09_mesh.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">static</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
            <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
            <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
            <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
            <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
            <span class="p">},</span>
            <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
            <span class="p">},</span>
        <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
        <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
        <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">        normals, do not call this method&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
            <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
            <span class="p">)</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>

    <span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
        <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
            <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
            <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
            <span class="p">)</span>
            <span class="c1"># find face normal</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
            <span class="c1"># determine which face of the cube</span>
            <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
            <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
            <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
                <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>

<span class="sd">        This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">        with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
        <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
        <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>

<span class="sd">        Args:</span>
<span class="sd">          vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                    `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">          normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">                   calculate the surface normal based on vertices and assign</span>
<span class="sd">                   it per given vertex.)_</span>
<span class="sd">          material: Name of the material to use.</span>
<span class="sd">          texcoords: Texture UV coordinates.</span>
<span class="sd">          colors: Per vertex colors (optional)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
            <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>

        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the basic object properties.</p>
<p>Properties:
  children: Children hash for object. Each child object follows parent
            object. They take their parent object as origin and their
            coordinate system is relative to their parent. This
            behaviour resembles stars, planets and their moons.
  material: Material definitions of the object.
  matrix: Matrix definition of the object. This is a 4x4 Uniform Matrix
          but data is set as an array for easier transformations. First
          4 decimals are "Left" vector, second 4 are "Direction", third
          4 are "Up" and last four decimals are "Position" vectors.</p>
<p>Args:
  track_motion: Track object motion (default: false). Object tracking
                is time independent. It just saves the object matrix
                for every change. Uses matrix position for drawing the
                motion path.
  static: (Default <code>True</code>) Indicates if object geometry is expected
          to be changed in the future. If object is not static, then
          its' vertex buffer object references and vertex informations
          will not be deleted to be used for future reference.
  name: Name of the object (optional, default '') Note that, when
        object gets added to a Scene with a name, Scene will assign
        that name to the object, overwriting any existing name of the
        object.
  visible: Is this object visible at the scene, default: <code>True</code>. To
           hide an object, you can call <code>object.hide()</code> and to show
           it again use: <code>object.show()</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">static</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            

            
  
    <div class="desc"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.static" class="name">var <span class="ident">static</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.static">static</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Mesh.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Mesh.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Mesh.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Mesh.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Object" class="name">class <span class="ident">Object</span></p>
      
  
    <div class="desc"><p>Main Payton Object.</p>
<p>This is an abstract class to define common properties and methods between
Mesh / Cube / Sphere/ Shape2D / PointCloud, etc.</p>
<p>Objects are not actually built as 3D vertex arrays until they are rendered.
Render function calls <code>build</code> function if needed. Build function creates
the OpenGL Vertex Array Object. VAO is static data so, once the object
is built, changing vertices or indices will not take effect at the scene.</p>
<p>You need to call <a href="base.m.html#payton.scene.geometry.base.Object.build"><code>payton.scene.geometry.base.Object.build</code></a> function to
refresh Vertex Array Object.</p>
<p>OpenGL can not magically extend a memory buffer, so for every new vertices
added to the object, OpenGL needs to re-create the buffer area. This is
not an efficitient technique if number of vertices increase in time.
As a result Payton allocates buffer for 500 vertices in the beginning and
uses part of it. If the object exceeds 500 vertices, a new buffer is
created with 500 vertices more, copies existing vertices to the new
buffer and the old buffer is deleted.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Object</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Main Payton Object.</span>

<span class="sd">    This is an abstract class to define common properties and methods between</span>
<span class="sd">    Mesh / Cube / Sphere/ Shape2D / PointCloud, etc.</span>

<span class="sd">    Objects are not actually built as 3D vertex arrays until they are rendered.</span>
<span class="sd">    Render function calls `build` function if needed. Build function creates</span>
<span class="sd">    the OpenGL Vertex Array Object. VAO is static data so, once the object</span>
<span class="sd">    is built, changing vertices or indices will not take effect at the scene.</span>

<span class="sd">    You need to call `payton.scene.geometry.base.Object.build` function to</span>
<span class="sd">    refresh Vertex Array Object.</span>

<span class="sd">    OpenGL can not magically extend a memory buffer, so for every new vertices</span>
<span class="sd">    added to the object, OpenGL needs to re-create the buffer area. This is</span>
<span class="sd">    not an efficitient technique if number of vertices increase in time.</span>
<span class="sd">    As a result Payton allocates buffer for 500 vertices in the beginning and</span>
<span class="sd">    uses part of it. If the object exceeds 500 vertices, a new buffer is</span>
<span class="sd">    created with 500 vertices more, copies existing vertices to the new</span>
<span class="sd">    buffer and the old buffer is deleted.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">static</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">track_motion</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the basic object properties.</span>

<span class="sd">        Properties:</span>
<span class="sd">          children: Children hash for object. Each child object follows parent</span>
<span class="sd">                    object. They take their parent object as origin and their</span>
<span class="sd">                    coordinate system is relative to their parent. This</span>
<span class="sd">                    behaviour resembles stars, planets and their moons.</span>
<span class="sd">          material: Material definitions of the object.</span>
<span class="sd">          matrix: Matrix definition of the object. This is a 4x4 Uniform Matrix</span>
<span class="sd">                  but data is set as an array for easier transformations. First</span>
<span class="sd">                  4 decimals are &quot;Left&quot; vector, second 4 are &quot;Direction&quot;, third</span>
<span class="sd">                  4 are &quot;Up&quot; and last four decimals are &quot;Position&quot; vectors.</span>

<span class="sd">        Args:</span>
<span class="sd">          track_motion: Track object motion (default: false). Object tracking</span>
<span class="sd">                        is time independent. It just saves the object matrix</span>
<span class="sd">                        for every change. Uses matrix position for drawing the</span>
<span class="sd">                        motion path.</span>
<span class="sd">          static: (Default `True`) Indicates if object geometry is expected</span>
<span class="sd">                  to be changed in the future. If object is not static, then</span>
<span class="sd">                  its&#39; vertex buffer object references and vertex informations</span>
<span class="sd">                  will not be deleted to be used for future reference.</span>
<span class="sd">          name: Name of the object (optional, default &#39;&#39;) Note that, when</span>
<span class="sd">                object gets added to a Scene with a name, Scene will assign</span>
<span class="sd">                that name to the object, overwriting any existing name of the</span>
<span class="sd">                object.</span>
<span class="sd">          visible: Is this object visible at the scene, default: `True`. To</span>
<span class="sd">                   hide an object, you can call `object.hide()` and to show</span>
<span class="sd">                   it again use: `object.show()`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># store diffeerent materials</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Material</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">DEFAULT</span><span class="p">:</span> <span class="n">Material</span><span class="p">()}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">static</span> <span class="o">=</span> <span class="n">static</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="n">visible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="p">]</span>
        <span class="c1"># Object vertices. Each vertex has 3 decimals (X, Y, Z). Vertices</span>
        <span class="c1"># are continuous. [X, Y, Z, X, Y, Z, X, Y, Z, X, ... ]</span>
        <span class="c1">#                  -- 1 --  -- 2 --  -- 3 --  -- 4 --</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Object vertex list</span>

        <span class="c1"># @NOTE: we have separate indices for materials but this base</span>
        <span class="c1">#        index list holds all indice definitions for fast access</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span> <span class="n">IList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Vertex normals, 1 normal coordinate for 1 Vertex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Texture coordinates, 1 coordinate per Vertex</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
            <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># per-vertex colors, optional.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># flag for using vertex colors</span>

        <span class="c1"># Vertices do not mean anything unless we define how to use them.</span>
        <span class="c1"># For instance, 3 vertices make a triangle or 2 vertices define a line</span>
        <span class="c1"># order of vertices are defined in materials indices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Number of vertices to report to OpenGL.</span>

        <span class="c1"># This is an optimization technique for dynamic objects where there are</span>
        <span class="c1"># increasing number of vertices. We allocate some buffer before-hand</span>
        <span class="c1"># and if we fill all of it, we resize it.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="mi">12</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="mi">8</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Model matrix.</span>
        <span class="c1"># Check if buffer size allocated for the object has changed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># Track object motion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span> <span class="o">=</span> <span class="n">track_motion</span>
        <span class="c1"># Motion path, stores every matrix change.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
            <span class="c1"># _motion_path_line is used to display the motion path in scene</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># For raycast tests - bounding radius is the radius of the bounding</span>
        <span class="c1"># sphere.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># Vertex Array Object pointer</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Object geometry has changed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Refresh object</span>

<span class="sd">        Forces object to get built again</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">material</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Material</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span>

    <span class="nd">@material.setter</span>
    <span class="k">def</span> <span class="nf">material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span> <span class="o">=</span> <span class="n">mat</span>

    <span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>

<span class="sd">        Keep in mind that, adding material does not refer to the material</span>
<span class="sd">        but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">        and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">        from breaking the objects, we create the clone of the material.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get direction vector from Matrix&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>

    <span class="nd">@direction.setter</span>
    <span class="k">def</span> <span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Set direction vector of Matrix</span>

<span class="sd">        Attention! This needs to be a unit vector!</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Direction needs 3 components (x,y,z)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">left</span> <span class="o">=</span> <span class="n">cross_product</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">left</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">left</span>
        <span class="n">up</span> <span class="o">=</span> <span class="n">cross_product</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">up</span> <span class="o">+=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">up</span>

    <span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>

    <span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>

<span class="sd">        Args:</span>
<span class="sd">          angle: Angle in radians</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>

<span class="sd">        Args:</span>
<span class="sd">          angle: Angle in radians</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>

<span class="sd">        Args:</span>
<span class="sd">          angle: Angle in radians</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
        <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>

<span class="sd">        This method is not 100% accurate as it is based on a rough</span>
<span class="sd">        assumption. Sphere area will be larger than actual object.</span>

<span class="sd">        If you want to have a more accurate way to handle this, try</span>
<span class="sd">        using raycast triangle intersect</span>

<span class="sd">        Args:</span>
<span class="sd">          start: Starting point of the ray (such as eye position)</span>
<span class="sd">          vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">                  This is a unit vector showing the ray direction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
            <span class="n">start</span><span class="p">,</span>
            <span class="n">vector</span><span class="p">,</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>

    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Destroy objects self.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: `True` on successful destroy of `self`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
                <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Go back N step in time</span>

<span class="sd">        This is suitable for solving collisions and getting a step back.</span>
<span class="sd">        On the other hand, this function requires `track_motion` to be</span>
<span class="sd">        True.</span>

<span class="sd">        Args:</span>
<span class="sd">          steps: Number of steps to go back. (Default = 1)</span>

<span class="sd">        Returns:</span>
<span class="sd">          bool: If step back is successful</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Move object forward</span>

<span class="sd">        This method calculates to motion path according to direction</span>
<span class="sd">        of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>

<span class="sd">        So matrix position gets updated according to direction * distance</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Update matrix</span>

<span class="sd">        Turn object matrix into numpy array.</span>

<span class="sd">        Args:</span>
<span class="sd">          parent_matrix: Parent objects matrix</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
        <span class="c1"># suitable for OpenGL Pipeline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="c1"># When there is a parent object, child object follows parents matrix</span>
        <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Track object motion</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: `True` on successful tracking of `self`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="c1"># Add the new matrix to motion path records</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
        <span class="c1"># Add the matrix position to motion math line for visualisation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
            <span class="p">)</span>

        <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">visible</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check if object is visible</span>

<span class="sd">        Returns:</span>
<span class="sd">          bool: `True` if visible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">has_missing_vao</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span>
                <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
        <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">        this function.</span>

<span class="sd">        Args:</span>
<span class="sd">          proj: Camera projection matrix.</span>
<span class="sd">          view: Camera location/view matrix.</span>
<span class="sd">          lights: Light objects in the scene</span>
<span class="sd">          parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                         be the scene itself or another object. In case of</span>
<span class="sd">                         another object, object will position itself relative</span>
<span class="sd">                         to its parent object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># dummy object, render children and leave</span>
            <span class="c1"># render children</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                    <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
                <span class="p">)</span>

            <span class="k">return</span>

        <span class="c1"># Material shading mode.</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>

        <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>

            <span class="c1"># Actual rendering</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
            <span class="p">):</span>
                <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
                <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                    <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                    <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
                <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                    <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                    <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>

                <span class="n">glDrawElements</span><span class="p">(</span>
                    <span class="n">primitive</span><span class="p">,</span>
                    <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                    <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                    <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
                <span class="p">)</span>

                <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                    <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
                <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

            <span class="c1"># End using the shader program.</span>
            <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>

        <span class="c1"># Render motion path</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>

        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get position of the Object.</span>

<span class="sd">        Return matrix position list</span>

<span class="sd">        Returns:</span>
<span class="sd">          List[float]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>

    <span class="nd">@position.setter</span>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Shortcut function for explicitly modifying matrix indices.</span>

<span class="sd">        Basically just sets x, y, z of the matrix. Does not change its</span>
<span class="sd">        direction or up vectors.</span>

<span class="sd">        Args:</span>
<span class="sd">          pos: Position list ([x, y, z])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add child to this object.</span>

<span class="sd">        In a basic example:</span>

<span class="sd">            .. include:: ../../../examples/basics/05_children.py</span>

<span class="sd">        Args:</span>
<span class="sd">          name: Name of the object, must be unique within its siblings</span>
<span class="sd">          obj: Object. Must be an instance of</span>
<span class="sd">               `payton.scene.geometry.base.Object`</span>

<span class="sd">        Returns:</span>
<span class="sd">          bool: False in case of an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">        space.</span>

<span class="sd">        Args:</span>
<span class="sd">          coordinates: List[float] (x, y, z)</span>

<span class="sd">        Returns:</span>
<span class="sd">          List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>

<span class="sd">        Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">        always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">        world coordinates of all vertices in B, this method will return them.</span>

<span class="sd">        **Important!** This is a costly operation so use with caution!</span>

<span class="sd">        Returns:</span>
<span class="sd">          map(List[List[float]])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
        <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_calc_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Calculate the bounding sphere radius</span>

<span class="sd">        Returns:</span>
<span class="sd">          float</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">bmin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">bmax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bmin</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
            <span class="n">bmax</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">bmin</span> <span class="o">=</span> <span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">z</span><span class="p">)]</span>
            <span class="n">bmax</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">z</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span> <span class="o">=</span> <span class="n">distance</span><span class="p">(</span><span class="n">bmax</span><span class="p">,</span> <span class="n">bmin</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span> <span class="o">=</span> <span class="p">[</span><span class="n">bmin</span><span class="p">,</span> <span class="n">bmax</span><span class="p">]</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bounding_radius</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return bounding radius</span>

<span class="sd">        This property function *WILL NOT* update the previously</span>
<span class="sd">        calculated value. If you add vertices to the object, you must call</span>
<span class="sd">        `payton.scene.geometry.base.Object.refresh` function to get radius</span>
<span class="sd">        and the whole object updated.</span>

<span class="sd">        Returns:</span>
<span class="sd">          float</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Build OpenGL Vertex Array for the object</span>

<span class="sd">        This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">        exists in the first render cycle. Once the vba is built,</span>
<span class="sd">        geometry changes or material display mode changes will not be</span>
<span class="sd">        automatically effected. So, in every geometry or display mode</span>
<span class="sd">        change, a `build` call is necessary.</span>

<span class="sd">        If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">        call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">        `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">        So in this case, calling `build` function twice will result in</span>
<span class="sd">        an invisible object (will not be drawn).</span>

<span class="sd">        Additionally, this method goes through each material mapping and</span>
<span class="sd">        build their indices as well. Each material map has its own</span>
<span class="sd">        Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">        call.</span>

<span class="sd">        Returns:</span>
<span class="sd">          bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
        <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
        <span class="c1"># different than raw memory model of C (OpenGL)</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

        <span class="c1"># We will let all materials to share the same buffer objects</span>
        <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>

        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>

        <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
        <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
        <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
        <span class="c1"># more suitable way.</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
            <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>

        <span class="c1"># Buffer overflow, we need more space.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="c1"># glBufferData creates a new data area</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
            <span class="c1"># much more efficient way to handle things.</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>

        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>

        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
                <span class="n">glBufferData</span><span class="p">(</span>
                    <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">glBufferSubData</span><span class="p">(</span>
                    <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
                <span class="p">)</span>

        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
                <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>

        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
                <span class="c1"># Generate Vertex Array</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="c1"># We need 1 buffer for material as indices</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
                <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
                <span class="c1"># Material shader must be built when there is an active binding</span>
                <span class="c1"># to vertex array</span>
                <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># we already have vertex array object, just bind it to modify</span>
                <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>

            <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

            <span class="c1"># Bind Vertices</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="c1"># Bind Normals</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

            <span class="c1"># Bind TexCoords</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
                <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
                <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                    <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="c1"># Bind Vertex Colors</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
                <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
                <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
                <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                    <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="p">)</span>

            <span class="c1"># Bind Indices</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
            <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>

            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
            <span class="c1"># we can clear this data to free some more memory</span>
            <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, static=True, name=&#39;&#39;, visible=True, track_motion=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the basic object properties.</p>
<p>Properties:
  children: Children hash for object. Each child object follows parent
            object. They take their parent object as origin and their
            coordinate system is relative to their parent. This
            behaviour resembles stars, planets and their moons.
  material: Material definitions of the object.
  matrix: Matrix definition of the object. This is a 4x4 Uniform Matrix
          but data is set as an array for easier transformations. First
          4 decimals are "Left" vector, second 4 are "Direction", third
          4 are "Up" and last four decimals are "Position" vectors.</p>
<p>Args:
  track_motion: Track object motion (default: false). Object tracking
                is time independent. It just saves the object matrix
                for every change. Uses matrix position for drawing the
                motion path.
  static: (Default <code>True</code>) Indicates if object geometry is expected
          to be changed in the future. If object is not static, then
          its' vertex buffer object references and vertex informations
          will not be deleted to be used for future reference.
  name: Name of the object (optional, default '') Note that, when
        object gets added to a Scene with a name, Scene will assign
        that name to the object, overwriting any existing name of the
        object.
  visible: Is this object visible at the scene, default: <code>True</code>. To
           hide an object, you can call <code>object.hide()</code> and to show
           it again use: <code>object.show()</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">static</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">track_motion</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the basic object properties.</span>
<span class="sd">    Properties:</span>
<span class="sd">      children: Children hash for object. Each child object follows parent</span>
<span class="sd">                object. They take their parent object as origin and their</span>
<span class="sd">                coordinate system is relative to their parent. This</span>
<span class="sd">                behaviour resembles stars, planets and their moons.</span>
<span class="sd">      material: Material definitions of the object.</span>
<span class="sd">      matrix: Matrix definition of the object. This is a 4x4 Uniform Matrix</span>
<span class="sd">              but data is set as an array for easier transformations. First</span>
<span class="sd">              4 decimals are &quot;Left&quot; vector, second 4 are &quot;Direction&quot;, third</span>
<span class="sd">              4 are &quot;Up&quot; and last four decimals are &quot;Position&quot; vectors.</span>
<span class="sd">    Args:</span>
<span class="sd">      track_motion: Track object motion (default: false). Object tracking</span>
<span class="sd">                    is time independent. It just saves the object matrix</span>
<span class="sd">                    for every change. Uses matrix position for drawing the</span>
<span class="sd">                    motion path.</span>
<span class="sd">      static: (Default `True`) Indicates if object geometry is expected</span>
<span class="sd">              to be changed in the future. If object is not static, then</span>
<span class="sd">              its&#39; vertex buffer object references and vertex informations</span>
<span class="sd">              will not be deleted to be used for future reference.</span>
<span class="sd">      name: Name of the object (optional, default &#39;&#39;) Note that, when</span>
<span class="sd">            object gets added to a Scene with a name, Scene will assign</span>
<span class="sd">            that name to the object, overwriting any existing name of the</span>
<span class="sd">            object.</span>
<span class="sd">      visible: Is this object visible at the scene, default: `True`. To</span>
<span class="sd">               hide an object, you can call `object.hide()` and to show</span>
<span class="sd">               it again use: `object.show()`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Object</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># store diffeerent materials</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Material</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">DEFAULT</span><span class="p">:</span> <span class="n">Material</span><span class="p">()}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">static</span> <span class="o">=</span> <span class="n">static</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="n">visible</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="c1"># Object vertices. Each vertex has 3 decimals (X, Y, Z). Vertices</span>
    <span class="c1"># are continuous. [X, Y, Z, X, Y, Z, X, Y, Z, X, ... ]</span>
    <span class="c1">#                  -- 1 --  -- 2 --  -- 3 --  -- 4 --</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Object vertex list</span>
    <span class="c1"># @NOTE: we have separate indices for materials but this base</span>
    <span class="c1">#        index list holds all indice definitions for fast access</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span> <span class="n">IList</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Indices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
        <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Vertex normals, 1 normal coordinate for 1 Vertex</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
        <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Texture coordinates, 1 coordinate per Vertex</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span>
        <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># per-vertex colors, optional.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># flag for using vertex colors</span>
    <span class="c1"># Vertices do not mean anything unless we define how to use them.</span>
    <span class="c1"># For instance, 3 vertices make a triangle or 2 vertices define a line</span>
    <span class="c1"># order of vertices are defined in materials indices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Number of vertices to report to OpenGL.</span>
    <span class="c1"># This is an optimization technique for dynamic objects where there are</span>
    <span class="c1"># increasing number of vertices. We allocate some buffer before-hand</span>
    <span class="c1"># and if we fill all of it, we resize it.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="mi">12</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="mi">8</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Model matrix.</span>
    <span class="c1"># Check if buffer size allocated for the object has changed.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Track object motion</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span> <span class="o">=</span> <span class="n">track_motion</span>
    <span class="c1"># Motion path, stores every matrix change.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Line</span><span class="p">):</span>
        <span class="c1"># _motion_path_line is used to display the motion path in scene</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1"># For raycast tests - bounding radius is the radius of the bounding</span>
    <span class="c1"># sphere.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Vertex Array Object pointer</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>  <span class="c1"># Object geometry has changed.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Object.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Object.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Object.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Object.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            

            
  
    <div class="desc"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.static" class="name">var <span class="ident">static</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.track_motion" class="name">var <span class="ident">track_motion</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Object.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Plane" class="name">class <span class="ident">Plane</span></p>
      
  
    <div class="desc"><p>Plane object</p>
<p>This is a 2D Plane in 3D World. Has a width in X and height in Y.
If you need to place it in another axis, try modifying its matrix.</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">13</span><span class="nv">_plane</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Plane</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plane object</span>

<span class="sd">    This is a 2D Plane in 3D World. Has a width in X and height in Y.</span>
<span class="sd">    If you need to place it in another axis, try modifying its matrix.</span>

<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/13_plane.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize plane</span>

<span class="sd">        Args:</span>
<span class="sd">          width: Width of the plane</span>
<span class="sd">          height: Height of the plane</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">*=</span> <span class="mf">0.5</span>
        <span class="n">height</span> <span class="o">*=</span> <span class="mf">0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Plane">Plane</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, width=1.0, height=1.0, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize plane</p>
<p>Args:
  width: Width of the plane
  height: Height of the plane</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize plane</span>
<span class="sd">    Args:</span>
<span class="sd">      width: Width of the plane</span>
<span class="sd">      height: Height of the plane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">width</span> <span class="o">*=</span> <span class="mf">0.5</span>
    <span class="n">height</span> <span class="o">*=</span> <span class="mf">0.5</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="o">-</span><span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">[</span><span class="o">-</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Plane.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Mesh">Mesh</a></code>.<code><a href="#payton.scene.geometry.Mesh.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Plane.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Plane.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Plane.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Plane.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Plane.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Plane.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Plane.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Plane.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.PointCloud" class="name">class <span class="ident">PointCloud</span></p>
      
  
    <div class="desc"><p>Point cloud</p>
<p>If you change the vertices, do not forget to do a <code>refresh</code> to take
effect.</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">11</span><span class="nv">_point_cloud</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">PointCloud</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Point cloud</span>

<span class="sd">    If you change the vertices, do not forget to do a `refresh` to take</span>
<span class="sd">    effect.</span>

<span class="sd">    Example use case:</span>

<span class="sd">        .. include:: ../../../examples/basics/11_point_cloud.py</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize Point Cloud</span>

<span class="sd">        Args:</span>
<span class="sd">          vertices: List of point vertices</span>
<span class="sd">          colors: List of colors per vertex, follows the same index as vertices</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">vertices</span>
        <span class="c1"># Expose vertices by reference for modification</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_history</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">POINTS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Toggle wireframe overwrite to disable mode change&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Tracking point cloud is not possible at the moment</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: `False`. Tracking of point clouds not implemented.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add a point to the cloud</span>

<span class="sd">        Args:</span>
<span class="sd">          vertices: Vertices to add</span>
<span class="sd">          colors: Colors of the vertices in the same order. (Optional)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">vertices</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vertex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;len(colors) != len(vertices)&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.PointCloud">PointCloud</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, vertices=None, colors=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize Point Cloud</p>
<p>Args:
  vertices: List of point vertices
  colors: List of colors per vertex, follows the same index as vertices</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize Point Cloud</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: List of point vertices</span>
<span class="sd">      colors: List of colors per vertex, follows the same index as vertices</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">vertices</span>
    <span class="c1"># Expose vertices by reference for modification</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span> <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">colors</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_history</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">POINTS</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.add">
    <p>def <span class="ident">add</span>(</p><p>self, vertices, colors=None, material=&#39;default&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a point to the cloud</p>
<p>Args:
  vertices: Vertices to add
  colors: Colors of the vertices in the same order. (Optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.add', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.add" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a point to the cloud</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices to add</span>
<span class="sd">      colors: Colors of the vertices in the same order. (Optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">vertices</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vertex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">])</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;len(colors) != len(vertices)&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe overwrite to disable mode change</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe overwrite to disable mode change&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Tracking point cloud is not possible at the moment</p>
<p>Returns:
    bool: <code>False</code>. Tracking of point clouds not implemented.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Tracking point cloud is not possible at the moment</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `False`. Tracking of point clouds not implemented.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.PointCloud.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.PointCloud.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.PointCloud.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.direction" class="name">var <span class="ident">direction</span></p>
            

            
  
    <div class="desc"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.PointCloud.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.RagDoll" class="name">class <span class="ident">RagDoll</span></p>
      
  
    <div class="desc"><p>Line object</p>
<p>Exceptionally, due to hard reference for motion path feature, this class
is defined in base.py instead of line.py</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">RagDoll</span><span class="p">(</span><span class="n">Bone</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;root_joint_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lower_spine&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;end_joint_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;higher_spine&quot;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;length&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Joint</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_joints</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_geometry</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">setup_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">NECK</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_COLLAR</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_COLLAR</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_SHOULDER</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_SHOULDER</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_ELBOW</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_ELBOW</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_WRIST</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_WRIST</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_HIP</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_HIP</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_KNEE</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_KNEE</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_FOOT</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_FOOT</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
            <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
            <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">setup_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">neck</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;lower_neck&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">neck</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;head_top&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.4</span>
        <span class="p">)</span>
        <span class="n">neck</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">head</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_collar</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_collar_joint&quot;</span><span class="p">,</span>
            <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_shoulder&quot;</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_collar</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

        <span class="n">right_collar</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_collar_joint&quot;</span><span class="p">,</span>
            <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_shoulder&quot;</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_collar</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

        <span class="n">right_collar</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
        <span class="n">left_collar</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">))</span>

        <span class="n">right_upper_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_shoulder&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_elbow&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="n">right_collar</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_upper_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>

        <span class="n">left_upper_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_shoulder&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_elbow&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="n">left_collar</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_upper_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">))</span>

        <span class="n">right_lower_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_elbow&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_wrist&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_lower_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_lower_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_elbow&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_wrist&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_lower_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

        <span class="n">right_hand</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_wrist&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_hand&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
        <span class="p">)</span>
        <span class="n">right_lower_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_hand</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_hand</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_wrist&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_hand&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
        <span class="p">)</span>
        <span class="n">left_lower_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_hand</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>

        <span class="n">right_upper_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_hip&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_knee&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_root</span><span class="p">(</span><span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">160</span><span class="p">))</span>

        <span class="n">left_upper_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_hip&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_knee&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_root</span><span class="p">(</span><span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">160</span><span class="p">))</span>

        <span class="n">right_lower_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_knee&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_foot&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
        <span class="p">)</span>
        <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_lower_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_lower_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_knee&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_foot&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
        <span class="p">)</span>
        <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_lower_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">right_foot</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_foot&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_toe&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.3</span>
        <span class="p">)</span>
        <span class="n">right_lower_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_foot</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">right_foot</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_x</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span><span class="p">))</span>

        <span class="n">left_foot</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
            <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_foot&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_toe&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.3</span>
        <span class="p">)</span>
        <span class="n">left_lower_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_foot</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
        <span class="n">left_foot</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_x</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">NECK</span><span class="p">]</span> <span class="o">=</span> <span class="n">neck</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_COLLAR</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_collar</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_COLLAR</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_collar</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_SHOULDER</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_SHOULDER</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_ELBOW</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_lower_arm</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_ELBOW</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_lower_arm</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_WRIST</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_hand</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_WRIST</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_hand</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_HIP</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_HIP</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_KNEE</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_lower_leg</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_KNEE</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_lower_leg</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_FOOT</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_foot</span><span class="o">.</span><span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_FOOT</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_foot</span><span class="o">.</span><span class="n">root</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.RagDoll">RagDoll</a></li>
          <li><a href="ragdoll.m.html#payton.scene.geometry.ragdoll.Bone">payton.scene.geometry.ragdoll.Bone</a></li>
          <li><a href="#payton.scene.geometry.Line">Line</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Iniitalize line</p>
<p>Args:
  vertices: Vertices array for list of points.
  color: Color of the line</p>
<p>Example use case:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">17</span><span class="nv">_line</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;root_joint_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;lower_spine&quot;</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;end_joint_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;higher_spine&quot;</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;length&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Joint</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_joints</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setup_geometry</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>@TODO Implement this later! Not urgent</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;@TODO Implement this later! Not urgent&quot;&quot;&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Can&#39;t add materials to Line object&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.append">
    <p>def <span class="ident">append</span>(</p><p>self, vertices, material=&#39;default&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Append vertex or vertices to line.</p>
<p>Args:
  vertices: Vertex array of points.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.append', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.append" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Append vertex or vertices to line.</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertex array of points.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>  <span class="c1"># Number of vertices added</span>
    <span class="n">last_index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">+=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">*</span> <span class="n">diff</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">last_index</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">diff</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">indices</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.build_lines">
    <p>def <span class="ident">build_lines</span>(</p><p>self, vertices=None, color=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Build lines</p>
<p>Build line vertex array object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.build_lines', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.build_lines" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_lines</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Build lines</span>
<span class="sd">    Build line vertex array object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">vertices</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">vertices</span>
    <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">color</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span><span class="p">:</span>
        <span class="c1"># This is a dynamic object, destroying the object is not a good</span>
        <span class="c1"># idea so we just update the buffer here.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.connect_to_end">
    <p>def <span class="ident">connect_to_end</span>(</p><p>self, joint)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.connect_to_end', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.connect_to_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">connect_to_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">:</span> <span class="n">Joint</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">joint</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.connect_to_root">
    <p>def <span class="ident">connect_to_root</span>(</p><p>self, joint)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.connect_to_root', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.connect_to_root" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">connect_to_root</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">:</span> <span class="n">Joint</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">joint</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">joint</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.setup_geometry">
    <p>def <span class="ident">setup_geometry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.setup_geometry', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.setup_geometry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setup_geometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">NECK</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_COLLAR</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_COLLAR</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_SHOULDER</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_SHOULDER</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_ELBOW</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_ELBOW</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_WRIST</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_WRIST</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_HIP</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_HIP</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_KNEE</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_KNEE</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_FOOT</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_FOOT</span><span class="p">]</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span>
        <span class="s2">&quot;mesh&quot;</span><span class="p">,</span>
        <span class="n">Cube</span><span class="p">(</span><span class="n">from_corner</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">to_corner</span><span class="o">=</span><span class="p">[</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">]),</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.setup_joints">
    <p>def <span class="ident">setup_joints</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.setup_joints', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.setup_joints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">setup_joints</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">neck</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;lower_neck&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">neck</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">head</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;head&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;head_top&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.4</span>
    <span class="p">)</span>
    <span class="n">neck</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">head</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_collar</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_collar_joint&quot;</span><span class="p">,</span>
        <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_shoulder&quot;</span><span class="p">,</span>
        <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_collar</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_collar</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_collar_joint&quot;</span><span class="p">,</span>
        <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_shoulder&quot;</span><span class="p">,</span>
        <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_collar</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_collar</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">left_collar</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">right_upper_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_shoulder&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_elbow&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">)</span>
    <span class="n">right_collar</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_upper_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">left_upper_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_shoulder&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_elbow&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">)</span>
    <span class="n">left_collar</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_upper_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">))</span>
    <span class="n">right_lower_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_elbow&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_wrist&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">)</span>
    <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_lower_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_lower_arm</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_elbow&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_wrist&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">)</span>
    <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_lower_arm</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_hand</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_wrist&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_hand&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
    <span class="p">)</span>
    <span class="n">right_lower_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_hand</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_hand</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_wrist&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_hand&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.2</span>
    <span class="p">)</span>
    <span class="n">left_lower_arm</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_hand</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_upper_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_hip&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_knee&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_root</span><span class="p">(</span><span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">160</span><span class="p">))</span>
    <span class="n">left_upper_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_hip&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_knee&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connect_to_root</span><span class="p">(</span><span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_y</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="o">-</span><span class="mi">160</span><span class="p">))</span>
    <span class="n">right_lower_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_knee&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_foot&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">)</span>
    <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_lower_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_lower_leg</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_knee&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_foot&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">)</span>
    <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_lower_leg</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_foot</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;r_foot&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;r_toe&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.3</span>
    <span class="p">)</span>
    <span class="n">right_lower_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">right_foot</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">right_foot</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_x</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span><span class="p">))</span>
    <span class="n">left_foot</span> <span class="o">=</span> <span class="n">Bone</span><span class="p">(</span>
        <span class="n">root_joint_name</span><span class="o">=</span><span class="s2">&quot;l_foot&quot;</span><span class="p">,</span> <span class="n">end_joint_name</span><span class="o">=</span><span class="s2">&quot;l_toe&quot;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.3</span>
    <span class="p">)</span>
    <span class="n">left_lower_leg</span><span class="o">.</span><span class="n">connect_to_end</span><span class="p">(</span><span class="n">left_foot</span><span class="o">.</span><span class="n">root</span><span class="p">)</span>
    <span class="n">left_foot</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">rotate_around_x</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">NECK</span><span class="p">]</span> <span class="o">=</span> <span class="n">neck</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_COLLAR</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_collar</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_COLLAR</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_collar</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_SHOULDER</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_upper_arm</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_SHOULDER</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_upper_arm</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_ELBOW</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_lower_arm</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_ELBOW</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_lower_arm</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_WRIST</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_hand</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_WRIST</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_hand</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_HIP</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_upper_leg</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_HIP</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_upper_leg</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_KNEE</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_lower_leg</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_KNEE</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_lower_leg</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">R_FOOT</span><span class="p">]</span> <span class="o">=</span> <span class="n">right_foot</span><span class="o">.</span><span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="n">L_FOOT</span><span class="p">]</span> <span class="o">=</span> <span class="n">left_foot</span><span class="o">.</span><span class="n">root</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle Wireframe overwrite to disable mode change</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle Wireframe overwrite to disable mode change&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.RagDoll.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.RagDoll.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.RagDoll.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Line">Line</a></code>.<code><a href="#payton.scene.geometry.Line.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.position" class="name">var <span class="ident">position</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="ragdoll.m.html#payton.scene.geometry.ragdoll.Bone">payton.scene.geometry.ragdoll.Bone</a></code>.<code><a href="ragdoll.m.html#payton.scene.geometry.ragdoll.Bone.position">payton.scene.geometry.ragdoll.Bone.position</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.RagDoll.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Sphere" class="name">class <span class="ident">Sphere</span></p>
      
  
    <div class="desc"><p>Sphere object.</p>
<p>This object is generated using basic Spherical coordinates.
Beware of using high values for parallels and meridians. You might end up
with excessive number of vertices to render and a performance trouble.</p>
<p>Parameters:</p>
<ul>
<li><code>radius</code> default: <code>0.5</code></li>
<li><code>parallels</code> default: <code>12</code></li>
<li><code>meridians</code> default: <code>12</code></li>
</ul>
<p>Sphere object use case</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Sphere</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sphere object.</span>

<span class="sd">    This object is generated using basic Spherical coordinates.</span>
<span class="sd">    Beware of using high values for parallels and meridians. You might end up</span>
<span class="sd">    with excessive number of vertices to render and a performance trouble.</span>

<span class="sd">    Parameters:</span>

<span class="sd">    - `radius` default: `0.5`</span>
<span class="sd">    - `parallels` default: `12`</span>
<span class="sd">    - `meridians` default: `12`</span>

<span class="sd">    Sphere object use case</span>

<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
        <span class="n">parallels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
        <span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Initialize the sphere</span>

<span class="sd">        Args:</span>
<span class="sd">          radius: Radius of the sphere (default: 0.5, making it a unit sphere)</span>
<span class="sd">          parallels: Number of parallels (as in geography). (default: 12, 30</span>
<span class="sd">                     degrees of arcs)</span>
<span class="sd">          meridians: Number of meridians (as in geography). (default: 12)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">parallels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">meridians</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_sphere</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">build_sphere</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the sphere</span>

<span class="sd">        Returns:</span>
<span class="sd">          bool: `True` on successful creation of a `Sphere` object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
        <span class="c1"># step angle is the rotational angle to build the sphere</span>
        <span class="n">step_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">360.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)</span>
        <span class="c1"># step height is the arc in height</span>
        <span class="n">step_height</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">180.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">u_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span>
        <span class="n">v_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_triangles</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)):</span>
            <span class="n">x1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">y1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">z1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">u1</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
            <span class="n">v1</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>

            <span class="n">x2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">y2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
            <span class="n">z2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">u2</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
            <span class="n">v2</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">x3</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">r</span>
                <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="p">)</span>
            <span class="n">y3</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">r</span>
                <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="p">)</span>
            <span class="n">z3</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">u3</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">v3</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

            <span class="n">x4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">y4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">z4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
            <span class="n">u4</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">v4</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>

            <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">z4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="n">indices</span> <span class="o">+=</span> <span class="mi">4</span>
        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Sphere">Sphere</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, radius=0.5, parallels=12, meridians=12, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the sphere</p>
<p>Args:
  radius: Radius of the sphere (default: 0.5, making it a unit sphere)
  parallels: Number of parallels (as in geography). (default: 12, 30
             degrees of arcs)
  meridians: Number of meridians (as in geography). (default: 12)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="n">parallels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
    <span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Initialize the sphere</span>
<span class="sd">    Args:</span>
<span class="sd">      radius: Radius of the sphere (default: 0.5, making it a unit sphere)</span>
<span class="sd">      parallels: Number of parallels (as in geography). (default: 12, 30</span>
<span class="sd">                 degrees of arcs)</span>
<span class="sd">      meridians: Number of meridians (as in geography). (default: 12)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">radius</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">parallels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">meridians</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_sphere</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.build_sphere">
    <p>def <span class="ident">build_sphere</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate the sphere</p>
<p>Returns:
  bool: <code>True</code> on successful creation of a <code>Sphere</code> object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.build_sphere', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.build_sphere" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_sphere</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate the sphere</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: `True` on successful creation of a `Sphere` object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
    <span class="c1"># step angle is the rotational angle to build the sphere</span>
    <span class="n">step_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">360.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)</span>
    <span class="c1"># step height is the arc in height</span>
    <span class="n">step_height</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">180.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">)</span>
    <span class="n">indices</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">u_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">meridians</span>
    <span class="n">v_step</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">clear_triangles</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parallels</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">meridians</span><span class="p">)):</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">u1</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="n">j</span><span class="p">)</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">u2</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="n">j</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">r</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">y3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">r</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">z3</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">u3</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v3</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">y4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">step_angle</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">z4</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">step_height</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
        <span class="n">u4</span> <span class="o">=</span> <span class="n">u_step</span> <span class="o">*</span> <span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">v4</span> <span class="o">=</span> <span class="n">v_step</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span> <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">],</span> <span class="p">[</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x3</span><span class="p">,</span> <span class="n">y3</span><span class="p">,</span> <span class="n">z3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x4</span><span class="p">,</span> <span class="n">y4</span><span class="p">,</span> <span class="n">z4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u1</span><span class="p">,</span> <span class="n">v1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u2</span><span class="p">,</span> <span class="n">v2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u3</span><span class="p">,</span> <span class="n">v3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u4</span><span class="p">,</span> <span class="n">v4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">DEFAULT</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">indices</span> <span class="o">+</span> <span class="mi">3</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">indices</span> <span class="o">+=</span> <span class="mi">4</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Mesh">Mesh</a></code>.<code><a href="#payton.scene.geometry.Mesh.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Sphere.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Sphere.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Sphere.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Sphere.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="payton.scene.geometry.Wavefront" class="name">class <span class="ident">Wavefront</span></p>
      
  
    <div class="desc"><p>Wavefront object file class.
Only supports ascii obj files in a limited way.
So do not depend so much on this class.
Only designed to accept your triangular geometries.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Wavefront</span><span class="p">(</span><span class="n">Mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wavefront object file class.</span>
<span class="sd">    Only supports ascii obj files in a limited way.</span>
<span class="sd">    So do not depend so much on this class.</span>
<span class="sd">    Only designed to accept your triangular geometries.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize Wavefront Object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load obj file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found {filename}&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">load_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">material_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">material_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">()</span>
        <span class="n">material_name</span> <span class="o">=</span> <span class="n">DEFAULT</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;newmtl&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">material_name</span> <span class="o">!=</span> <span class="n">DEFAULT</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_material</span><span class="p">(</span><span class="n">material_name</span><span class="p">,</span> <span class="n">material</span><span class="p">)</span>
                <span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">()</span>
                <span class="n">material_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Kd&quot;</span><span class="p">:</span>
                <span class="c1"># Currently we only support diffuse color</span>
                <span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                    <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
                <span class="p">]</span>

            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;map_Kd&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
                    <span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{self.path}/{parts[1]}&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_material</span><span class="p">(</span><span class="n">material_name</span><span class="p">,</span> <span class="n">material</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_material_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found {filename}&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_material</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A bit of information on file format,</span>
<span class="sd">        v -&gt; x, y, z, (w)</span>
<span class="sd">        vt -&gt; u, [v, (w)]</span>
<span class="sd">        vn -&gt; x, y, z</span>
<span class="sd">        f -&gt; vertex_index/texcoord_index/normal_index ...</span>

<span class="sd">        Also there are definitions of material and line and object name</span>
<span class="sd">        but for now, the assumption is there will always be triangulated</span>
<span class="sd">        wavefront object files and always a single object at a time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">IList</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_indice_materials</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_normals</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">_texcoords</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
        <span class="n">material</span> <span class="o">=</span> <span class="n">DEFAULT</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
            <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;mtllib&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_material_file</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{self.path}/{parts[1]}&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;vt&quot;</span><span class="p">:</span>
                <span class="n">u</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">0</span>
                <span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u</span><span class="p">,</span> <span class="n">w</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;vn&quot;</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                <span class="n">z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
                <span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;usemtl&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
                    <span class="n">material</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span><span class="p">:</span>
                <span class="c1"># I guess this part of the code should be compatable</span>
                <span class="c1"># with POLYGON as well but IDK.</span>
                <span class="n">face</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[List[int]]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="n">subs</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
                    <span class="n">vertex</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="n">textcoord</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
                        <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="p">)</span>
                    <span class="n">normal</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
                        <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                    <span class="p">)</span>
                    <span class="n">face</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">vertex</span><span class="p">,</span> <span class="n">textcoord</span><span class="p">,</span> <span class="n">normal</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Only triangular wavefronts are accepted&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="p">)</span>
                <span class="n">_indice_materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>

        <span class="c1"># Now unpack indices to actual object data</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fix_normals</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">for</span> <span class="n">_k</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">_indices</span><span class="p">):</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
                <span class="n">l_vertex</span> <span class="o">=</span> <span class="n">_vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">l_normal</span> <span class="o">=</span> <span class="n">_normals</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">fix_normals</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="n">l_normal</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
                <span class="n">l_tex</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                    <span class="n">l_tex</span> <span class="o">=</span> <span class="n">_texcoords</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_vertex</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_normal</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_tex</span><span class="p">)</span>
                <span class="n">ind</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">_indice_materials</span><span class="p">[</span><span class="n">_k</span><span class="p">]]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">fix_normals</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#payton.scene.geometry.Wavefront">Wavefront</a></li>
          <li><a href="#payton.scene.geometry.Mesh">Mesh</a></li>
          <li><a href="#payton.scene.geometry.Object">Object</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, filename=&#39;&#39;, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize Wavefront Object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.__init__', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize Wavefront Object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.absolute_vertices">
    <p>def <span class="ident">absolute_vertices</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a map of all local vertices as absolute coordinates.</p>
<p>Imagine that object B is a child of object A. In this case, B will
always stand (follow) relative to A. If you want to know the exact
world coordinates of all vertices in B, this method will return them.</p>
<p><strong>Important!</strong> This is a costly operation so use with caution!</p>
<p>Returns:
  map(List[List[float]])</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.absolute_vertices', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.absolute_vertices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">absolute_vertices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
    <span class="sd">&quot;&quot;&quot;Return a map of all local vertices as absolute coordinates.</span>
<span class="sd">    Imagine that object B is a child of object A. In this case, B will</span>
<span class="sd">    always stand (follow) relative to A. If you want to know the exact</span>
<span class="sd">    world coordinates of all vertices in B, this method will return them.</span>
<span class="sd">    **Important!** This is a costly operation so use with caution!</span>
<span class="sd">    Returns:</span>
<span class="sd">      map(List[List[float]])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_absolute</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.add_child">
    <p>def <span class="ident">add_child</span>(</p><p>self, name, obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Add child to this object.</p>
<p>In a basic example:</p>
<div class="codehilite"><pre><span></span>.. <span class="k">include</span>:: ..<span class="o">/</span>..<span class="o">/</span>..<span class="o">/</span><span class="nv">examples</span><span class="o">/</span><span class="nv">basics</span><span class="o">/</span><span class="mi">05</span><span class="nv">_children</span>.<span class="nv">py</span>
</pre></div>


<p>Args:
  name: Name of the object, must be unique within its siblings
  obj: Object. Must be an instance of
       <a href="base.m.html#payton.scene.geometry.base.Object"><code>payton.scene.geometry.base.Object</code></a></p>
<p>Returns:
  bool: False in case of an error</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.add_child', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.add_child" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_child</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;Object&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add child to this object.</span>
<span class="sd">    In a basic example:</span>
<span class="sd">        .. include:: ../../../examples/basics/05_children.py</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Name of the object, must be unique within its siblings</span>
<span class="sd">      obj: Object. Must be an instance of</span>
<span class="sd">           `payton.scene.geometry.base.Object`</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: False in case of an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} exists in object children&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Object type is not valid&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.add_material">
    <p>def <span class="ident">add_material</span>(</p><p>self, name, material)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a material to the object.</p>
<p>Keep in mind that, adding material does not refer to the material
but does it through deepcopy. Initially, material holds indice
and vertex buffer objectt references. In order to prevent user
from breaking the objects, we create the clone of the material.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.add_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.add_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">material</span><span class="p">:</span> <span class="n">Material</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add a material to the object.</span>
<span class="sd">    Keep in mind that, adding material does not refer to the material</span>
<span class="sd">    but does it through deepcopy. Initially, material holds indice</span>
<span class="sd">    and vertex buffer objectt references. In order to prevent user</span>
<span class="sd">    from breaking the objects, we create the clone of the material.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Name {name} already exists&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.add_triangle">
    <p>def <span class="ident">add_triangle</span>(</p><p>self, vertices, material=&#39;default&#39;, normals=None, texcoords=None, colors=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Add triangle to Mesh</p>
<p>Args:
  vertices: Vertices of the triangle. This is required. Ex:
            <code>[[0, 0, 0], [2, 0, 0], [1, 1, 0]]</code>
  normals: Normals of the triangle. <em>(When left as None, Payton will
           calculate the surface normal based on vertices and assign
           it per given vertex.)</em>
  material: Name of the material to use.
  texcoords: Texture UV coordinates.
  colors: Per vertex colors (optional)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.add_triangle', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.add_triangle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_triangle</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vertices</span><span class="p">:</span> <span class="n">VList</span><span class="p">,</span>
    <span class="n">material</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">DEFAULT</span><span class="p">,</span>
    <span class="n">normals</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">texcoords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VList</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Add triangle to Mesh</span>
<span class="sd">    Args:</span>
<span class="sd">      vertices: Vertices of the triangle. This is required. Ex:</span>
<span class="sd">                `[[0, 0, 0], [2, 0, 0], [1, 1, 0]]`</span>
<span class="sd">      normals: Normals of the triangle. _(When left as None, Payton will</span>
<span class="sd">               calculate the surface normal based on vertices and assign</span>
<span class="sd">               it per given vertex.)_</span>
<span class="sd">      material: Name of the material to use.</span>
<span class="sd">      texcoords: Texture UV coordinates.</span>
<span class="sd">      colors: Per vertex colors (optional)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;A triangle must have 3 vertices&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">normals</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one normal per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">texcoords</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;There must be one texcoord per vertex&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">normals</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">,</span> <span class="n">normal</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">texcoords</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="k">if</span> <span class="n">colors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">+=</span> <span class="n">vertices</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">material</span><span class="p">]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">normal</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">texcoords</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.build">
    <p>def <span class="ident">build</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Build OpenGL Vertex Array for the object</p>
<p>This function gets automatically called if material's <code>._vao</code> does not
exists in the first render cycle. Once the vba is built,
geometry changes or material display mode changes will not be
automatically effected. So, in every geometry or display mode
change, a <code>build</code> call is necessary.</p>
<p>If <code>self.static</code> is <code>True</code>, then the system assumes that another update
call is not expected, thus frees <code>_normals</code>, <code>_textcoords</code>,
<code>_vertices</code> and <code>_indices</code> lists to free memory.
So in this case, calling <code>build</code> function twice will result in
an invisible object (will not be drawn).</p>
<p>Additionally, this method goes through each material mapping and
build their indices as well. Each material map has its own
Vertex Array Object and gets rendered by separate glDrawElements
call.</p>
<p>Returns:
  bool</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.build', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.build" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build OpenGL Vertex Array for the object</span>
<span class="sd">    This function gets automatically called if material&#39;s `._vao` does not</span>
<span class="sd">    exists in the first render cycle. Once the vba is built,</span>
<span class="sd">    geometry changes or material display mode changes will not be</span>
<span class="sd">    automatically effected. So, in every geometry or display mode</span>
<span class="sd">    change, a `build` call is necessary.</span>
<span class="sd">    If `self.static` is `True`, then the system assumes that another update</span>
<span class="sd">    call is not expected, thus frees `_normals`, `_textcoords`,</span>
<span class="sd">    `_vertices` and `_indices` lists to free memory.</span>
<span class="sd">    So in this case, calling `build` function twice will result in</span>
<span class="sd">    an invisible object (will not be drawn).</span>
<span class="sd">    Additionally, this method goes through each material mapping and</span>
<span class="sd">    build their indices as well. Each material map has its own</span>
<span class="sd">    Vertex Array Object and gets rendered by separate glDrawElements</span>
<span class="sd">    call.</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Turn python arrays into C type arrays using Numpy.</span>
    <span class="c1"># This is required for OpenGL. Python memory model is a bit</span>
    <span class="c1"># different than raw memory model of C (OpenGL)</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">texcoords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="c1"># We will let all materials to share the same buffer objects</span>
    <span class="c1"># We need 4 buffers (vertex, normal, texcoord, color)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="c1"># OpenGL allocates buffers in different mechanisms between</span>
    <span class="c1"># STATIC and DYNAMIC draw modes. If you select STATIC, then OpenGL</span>
    <span class="c1"># will assume that object buffer will not change and allocate it in a</span>
    <span class="c1"># more suitable way.</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_STATIC_DRAW</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="n">draw</span> <span class="o">=</span> <span class="n">GL_DYNAMIC_DRAW</span>
    <span class="c1"># Buffer overflow, we need more space.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">&lt;</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">&lt;</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span> <span class="o">=</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="c1"># Bind Vertices</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="c1"># glBufferData creates a new data area</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># glBufferSubData just replaces memory area in buffer so it is</span>
        <span class="c1"># much more efficient way to handle things.</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">vertices</span><span class="p">)</span>
    <span class="c1"># Bind Normals</span>
    <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
        <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">normals</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">normals</span><span class="p">)</span>
    <span class="c1"># Bind TexCoords</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size</span><span class="p">,</span> <span class="n">texcoords</span><span class="p">,</span> <span class="n">draw</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span>
                <span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">texcoords</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">texcoords</span>
            <span class="p">)</span>
    <span class="c1"># Bind Vertex Colors</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span><span class="p">:</span>
            <span class="n">glBufferData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">draw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">glBufferSubData</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
    <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_t_buffer_size_changed</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_INDICE</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">==</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="c1"># Generate Vertex Array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">glGenVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1"># We need 1 buffer for material as indices</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[</span><span class="n">glGenBuffers</span><span class="p">(</span><span class="mi">1</span><span class="p">)]</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="c1"># Material shader must be built when there is an active binding</span>
            <span class="c1"># to vertex array</span>
            <span class="n">material</span><span class="o">.</span><span class="n">build_shader</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># we already have vertex array object, just bind it to modify</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_indices</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># Bind Vertices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind Normals</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
        <span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="c1"># Bind TexCoords</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Vertex Colors</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">):</span>
            <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># shader layout location</span>
            <span class="n">glVertexAttribPointer</span><span class="p">(</span>
                <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Bind Indices</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">material</span><span class="o">.</span><span class="n">_vbos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">glBufferData</span><span class="p">(</span>
            <span class="n">GL_ELEMENT_ARRAY_BUFFER</span><span class="p">,</span> <span class="n">indices</span><span class="o">.</span><span class="n">nbytes</span><span class="p">,</span> <span class="n">indices</span><span class="p">,</span> <span class="n">draw</span>
        <span class="p">)</span>
        <span class="n">i_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">indices</span><span class="p">)</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">=</span> <span class="n">i_len</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">+=</span> <span class="n">i_len</span>
        <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">glBindBuffer</span><span class="p">(</span><span class="n">GL_ARRAY_BUFFER</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">static</span><span class="p">:</span>
        <span class="c1"># we can clear this data to free some more memory</span>
        <span class="n">glDeleteBuffers</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vbos</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.clear_triangles">
    <p>def <span class="ident">clear_triangles</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Clear all triangles inside the Mesh</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.clear_triangles', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.clear_triangles" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clear_triangles</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Clear all triangles inside the Mesh&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_colors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">_indices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.destroy">
    <p>def <span class="ident">destroy</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroy objects self.</p>
<p>Returns:
    bool: <code>True</code> on successful destroy of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.destroy', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.destroy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroy objects self.</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful destroy of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
            <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span><span class="p">:</span>
        <span class="n">glDeleteVertexArrays</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_vao</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vao</span> <span class="o">=</span> <span class="n">NO_VERTEX_ARRAY</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.direct_to">
    <p>def <span class="ident">direct_to</span>(</p><p>self, v)</p>
    </div>
    

    
  
    <div class="desc"><p>Direct the objects forward towards given point vector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.direct_to', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.direct_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">direct_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Direct the objects forward towards given point vector&quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">sub_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">normalize_vector</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">diff</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.fix_normals">
    <p>def <span class="ident">fix_normals</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to re-calculate Mesh normals, if your object has already perfect
normals, do not call this method</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.fix_normals', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.fix_normals" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to re-calculate Mesh normals, if your object has already perfect</span>
<span class="sd">    normals, do not call this method&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">normal</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.fix_texcoords">
    <p>def <span class="ident">fix_texcoords</span>(</p><p>self, u=1, v=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Try to recalculate mesh texture coordinates by cube projection</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.fix_texcoords', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.fix_texcoords" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fix_texcoords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Try to recalculate mesh texture coordinates by cube projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_calc_bounds</span><span class="p">()</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_box</span>
    <span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">depth</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">vmax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">normals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># front</span>
        <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># right</span>
        <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># left</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>  <span class="c1"># back</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># top</span>
        <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>  <span class="c1"># bottom</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="p">:</span>
        <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">[</span><span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span>
        <span class="p">)</span>
        <span class="c1"># find face normal</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="n">plane_normal</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">)</span>
        <span class="c1"># determine which face of the cube</span>
        <span class="n">angles</span> <span class="o">=</span> <span class="p">[</span><span class="n">vector_angle</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normals</span><span class="p">]</span>
        <span class="n">face_dir</span> <span class="o">=</span> <span class="n">angles</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">angles</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vmax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="n">height</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
        <span class="k">if</span> <span class="n">face_dir</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">v1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="p">(</span><span class="n">v2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="n">t3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="n">width</span>
            <span class="n">s3</span> <span class="o">=</span> <span class="p">(</span><span class="n">v3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">vmin</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="n">depth</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">t1</span><span class="p">,</span> <span class="n">s1</span><span class="p">],</span> <span class="p">[</span><span class="n">t2</span><span class="p">,</span> <span class="n">s2</span><span class="p">],</span> <span class="p">[</span><span class="n">t3</span><span class="p">,</span> <span class="n">s3</span><span class="p">]])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="p">[[</span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">u</span><span class="p">,</span> <span class="n">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">v</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, distance)</p>
    </div>
    

    
  
    <div class="desc"><p>Move object forward</p>
<p>This method calculates to motion path according to direction
of the object's matrix. <code>self.matrix[1]</code> indicates the direction.</p>
<p>So matrix position gets updated according to direction * distance</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.forward', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Move object forward</span>
<span class="sd">    This method calculates to motion path according to direction</span>
<span class="sd">    of the object&#39;s matrix. `self.matrix[1]` indicates the direction.</span>
<span class="sd">    So matrix position gets updated according to direction * distance</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">scale_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">distance</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_vectors</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">diff</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.hide">
    <p>def <span class="ident">hide</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.hide', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.hide" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.load">
    <p>def <span class="ident">load</span>(</p><p>self, obj_string)</p>
    </div>
    

    
  
    <div class="desc"><p>A bit of information on file format,
v -&gt; x, y, z, (w)
vt -&gt; u, [v, (w)]
vn -&gt; x, y, z
f -&gt; vertex_index/texcoord_index/normal_index ...</p>
<p>Also there are definitions of material and line and object name
but for now, the assumption is there will always be triangulated
wavefront object files and always a single object at a time.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.load', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.load" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A bit of information on file format,</span>
<span class="sd">    v -&gt; x, y, z, (w)</span>
<span class="sd">    vt -&gt; u, [v, (w)]</span>
<span class="sd">    vn -&gt; x, y, z</span>
<span class="sd">    f -&gt; vertex_index/texcoord_index/normal_index ...</span>
<span class="sd">    Also there are definitions of material and line and object name</span>
<span class="sd">    but for now, the assumption is there will always be triangulated</span>
<span class="sd">    wavefront object files and always a single object at a time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_vertices</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">IList</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_indice_materials</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_normals</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">_texcoords</span><span class="p">:</span> <span class="n">VList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">lines</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">material</span> <span class="o">=</span> <span class="n">DEFAULT</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;  &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="n">command</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;mtllib&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_material_file</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{self.path}/{parts[1]}&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;vt&quot;</span><span class="p">:</span>
            <span class="n">u</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">w</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">u</span><span class="p">,</span> <span class="n">w</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;vn&quot;</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">z</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;usemtl&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">:</span>
                <span class="n">material</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span><span class="p">:</span>
            <span class="c1"># I guess this part of the code should be compatable</span>
            <span class="c1"># with POLYGON as well but IDK.</span>
            <span class="n">face</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[List[int]]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">subs</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
                <span class="n">vertex</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="n">textcoord</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
                    <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                <span class="p">)</span>
                <span class="n">normal</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="nb">int</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span>
                    <span class="k">else</span> <span class="o">-</span><span class="mi">1</span>
                <span class="p">)</span>
                <span class="n">face</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">vertex</span><span class="p">,</span> <span class="n">textcoord</span><span class="p">,</span> <span class="n">normal</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">face</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Only triangular wavefronts are accepted&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">face</span><span class="p">)</span>
            <span class="n">_indice_materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
    <span class="c1"># Now unpack indices to actual object data</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">fix_normals</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">_k</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">_indices</span><span class="p">):</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">index</span><span class="p">:</span>
            <span class="n">l_vertex</span> <span class="o">=</span> <span class="n">_vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">l_normal</span> <span class="o">=</span> <span class="n">_normals</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fix_normals</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">l_normal</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>
            <span class="n">l_tex</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">l_tex</span> <span class="o">=</span> <span class="n">_texcoords</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_vertex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_normal</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_tex</span><span class="p">)</span>
            <span class="n">ind</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">_indice_materials</span><span class="p">[</span><span class="n">_k</span><span class="p">]]</span><span class="o">.</span><span class="n">_indices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fix_normals</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.load_file">
    <p>def <span class="ident">load_file</span>(</p><p>self, filename)</p>
    </div>
    

    
  
    <div class="desc"><p>Load obj file.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.load_file', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.load_file" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Load obj file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found {filename}&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.load_material">
    <p>def <span class="ident">load_material</span>(</p><p>self, material_string)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.load_material', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.load_material" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_material</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">material_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="n">material_string</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
    <span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">()</span>
    <span class="n">material_name</span> <span class="o">=</span> <span class="n">DEFAULT</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;newmtl&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">material_name</span> <span class="o">!=</span> <span class="n">DEFAULT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_material</span><span class="p">(</span><span class="n">material_name</span><span class="p">,</span> <span class="n">material</span><span class="p">)</span>
            <span class="n">material</span> <span class="o">=</span> <span class="n">Material</span><span class="p">()</span>
            <span class="n">material_name</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Kd&quot;</span><span class="p">:</span>
            <span class="c1"># Currently we only support diffuse color</span>
            <span class="n">material</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="p">[</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
            <span class="p">]</span>
        <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;map_Kd&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;/&quot;</span><span class="p">:</span>
                <span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">material</span><span class="o">.</span><span class="n">texture</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&quot;{self.path}/{parts[1]}&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_material</span><span class="p">(</span><span class="n">material_name</span><span class="p">,</span> <span class="n">material</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.load_material_file">
    <p>def <span class="ident">load_material_file</span>(</p><p>self, filename)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.load_material_file', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.load_material_file" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_material_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;File not found {filename}&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_material</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.refresh">
    <p>def <span class="ident">refresh</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Refresh object</p>
<p>Forces object to get built again</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.refresh', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.refresh" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Refresh object</span>
<span class="sd">    Forces object to get built again</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.render">
    <p>def <span class="ident">render</span>(</p><p>self, proj, view, lights, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Virtual function for rendering the object. Some objects can overwrite
this function.</p>
<p>Args:
  proj: Camera projection matrix.
  view: Camera location/view matrix.
  lights: Light objects in the scene
  parent_matrix: Parent matrix is the matrix of the parent. Parent can
                 be the scene itself or another object. In case of
                 another object, object will position itself relative
                 to its parent object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.render', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.render" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">proj</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">view</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">lights</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Light</span><span class="p">],</span>
    <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual function for rendering the object. Some objects can overwrite</span>
<span class="sd">    this function.</span>
<span class="sd">    Args:</span>
<span class="sd">      proj: Camera projection matrix.</span>
<span class="sd">      view: Camera location/view matrix.</span>
<span class="sd">      lights: Light objects in the scene</span>
<span class="sd">      parent_matrix: Parent matrix is the matrix of the parent. Parent can</span>
<span class="sd">                     be the scene itself or another object. In case of</span>
<span class="sd">                     another object, object will position itself relative</span>
<span class="sd">                     to its parent object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_missing_vao</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_needs_update</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_matrix</span><span class="p">(</span><span class="n">parent_matrix</span><span class="o">=</span><span class="n">parent_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">track</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertex_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># dummy object, render children and leave</span>
        <span class="c1"># render children</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span>
            <span class="p">)</span>
        <span class="k">return</span>
    <span class="c1"># Material shading mode.</span>
    <span class="n">mode</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_has_vertex_colors</span><span class="p">:</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">Shader</span><span class="o">.</span><span class="n">PER_VERTEX_COLOR</span>
    <span class="k">for</span> <span class="n">material</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">material</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">mode</span><span class="p">)</span>
        <span class="c1"># Actual rendering</span>
        <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">_vao</span> <span class="o">&gt;</span> <span class="n">NO_VERTEX_ARRAY</span> <span class="ow">and</span> <span class="n">glIsVertexArray</span><span class="p">(</span>
            <span class="n">material</span><span class="o">.</span><span class="n">_vao</span>
        <span class="p">):</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="n">material</span><span class="o">.</span><span class="n">_vao</span><span class="p">)</span>
            <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_LINE</span>
            <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_LINE_STRIP</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">SOLID</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_FILL</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_TRIANGLES</span>
            <span class="k">if</span> <span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">==</span> <span class="n">POINTS</span><span class="p">:</span>
                <span class="n">pmode</span> <span class="o">=</span> <span class="n">GL_POINT</span>
                <span class="n">primitive</span> <span class="o">=</span> <span class="n">GL_POINTS</span>
            <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">pmode</span><span class="p">)</span>
            <span class="n">glDrawElements</span><span class="p">(</span>
                <span class="n">primitive</span><span class="p">,</span>
                <span class="n">material</span><span class="o">.</span><span class="n">_vertex_count</span><span class="p">,</span>
                <span class="n">GL_UNSIGNED_INT</span><span class="p">,</span>
                <span class="n">ctypes</span><span class="o">.</span><span class="n">c_void_p</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">pmode</span> <span class="o">!=</span> <span class="n">GL_FILL</span><span class="p">:</span>
                <span class="n">glPolygonMode</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span> <span class="n">GL_FILL</span><span class="p">)</span>
            <span class="n">glBindVertexArray</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># End using the shader program.</span>
        <span class="n">material</span><span class="o">.</span><span class="n">end</span><span class="p">()</span>
    <span class="c1"># Render motion path</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">)</span>
    <span class="c1"># render children</span>
    <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">child</span><span class="p">]</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">proj</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">lights</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.rotate_around_x">
    <p>def <span class="ident">rotate_around_x</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pitch - Rotate around X axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.rotate_around_x', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.rotate_around_x" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Pitch - Rotate around X axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.rotate_around_y">
    <p>def <span class="ident">rotate_around_y</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Roll - Rotate around Y Axis (Direction)</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.rotate_around_y', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.rotate_around_y" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Roll - Rotate around Y Axis (Direction)</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.rotate_around_z">
    <p>def <span class="ident">rotate_around_z</span>(</p><p>self, angle)</p>
    </div>
    

    
  
    <div class="desc"><p>Rotate around Z Axis</p>
<p>Args:
  angle: Angle in radians</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.rotate_around_z', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.rotate_around_z" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rotate_around_z</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Rotate around Z Axis</span>
<span class="sd">    Args:</span>
<span class="sd">      angle: Angle in radians</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rot_matrix</span> <span class="o">=</span> <span class="n">create_rotation_matrix</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">angle</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="n">local_matrix</span> <span class="o">=</span> <span class="n">rot_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">local_matrix</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">local_matrix</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.scale">
    <p>def <span class="ident">scale</span>(</p><p>self, x, y, z)</p>
    </div>
    

    
  
    <div class="desc"><p>Scale Mesh by given factors</p>
<p>This does not create a scale matrix and multiply existing matrix
with it. Instead, it will scale the vertices by given factors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.scale', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.scale" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">z</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Scale Mesh by given factors</span>
<span class="sd">    This does not create a scale matrix and multiply existing matrix</span>
<span class="sd">    with it. Instead, it will scale the vertices by given factors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">z</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fix_normals</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.select">
    <p>def <span class="ident">select</span>(</p><p>self, start, vector)</p>
    </div>
    

    
  
    <div class="desc"><p>Select test for object using bounding Sphere.</p>
<p>This method is not 100% accurate as it is based on a rough
assumption. Sphere area will be larger than actual object.</p>
<p>If you want to have a more accurate way to handle this, try
using raycast triangle intersect</p>
<p>Args:
  start: Starting point of the ray (such as eye position)
  vector: Ray direction. This is not the end point of a line!
          This is a unit vector showing the ray direction.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.select', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.select" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">vector</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Select test for object using bounding Sphere.</span>
<span class="sd">    This method is not 100% accurate as it is based on a rough</span>
<span class="sd">    assumption. Sphere area will be larger than actual object.</span>
<span class="sd">    If you want to have a more accurate way to handle this, try</span>
<span class="sd">    using raycast triangle intersect</span>
<span class="sd">    Args:</span>
<span class="sd">      start: Starting point of the ray (such as eye position)</span>
<span class="sd">      vector: Ray direction. This is not the end point of a line!</span>
<span class="sd">              This is a unit vector showing the ray direction.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="n">raycast_sphere_intersect</span><span class="p">(</span>
        <span class="n">start</span><span class="p">,</span>
        <span class="n">vector</span><span class="p">,</span>
        <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bounding_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">obj</span><span class="p">]</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="ow">and</span> <span class="n">x</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_selected</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.show">
    <p>def <span class="ident">show</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.show', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.show" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_visible</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.step_back">
    <p>def <span class="ident">step_back</span>(</p><p>self, steps=1)</p>
    </div>
    

    
  
    <div class="desc"><p>Go back N step in time</p>
<p>This is suitable for solving collisions and getting a step back.
On the other hand, this function requires <code>track_motion</code> to be
True.</p>
<p>Args:
  steps: Number of steps to go back. (Default = 1)</p>
<p>Returns:
  bool: If step back is successful</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.step_back', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.step_back" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">step_back</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Go back N step in time</span>
<span class="sd">    This is suitable for solving collisions and getting a step back.</span>
<span class="sd">    On the other hand, this function requires `track_motion` to be</span>
<span class="sd">    True.</span>
<span class="sd">    Args:</span>
<span class="sd">      steps: Number of steps to go back. (Default = 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">      bool: If step back is successful</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">steps</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;track_motion should be True&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">steps</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span><span class="p">]</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="p">[</span><span class="o">-</span><span class="n">steps</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>  <span class="c1"># noqa</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.to_absolute">
    <p>def <span class="ident">to_absolute</span>(</p><p>self, coordinates)</p>
    </div>
    

    
  
    <div class="desc"><p>Return local coordinates (tuple, list) into absolute coordinates in
space.</p>
<p>Args:
  coordinates: List[float] (x, y, z)</p>
<p>Returns:
  List[float] (x', y', z')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.to_absolute', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.to_absolute" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_absolute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return local coordinates (tuple, list) into absolute coordinates in</span>
<span class="sd">    space.</span>
<span class="sd">    Args:</span>
<span class="sd">      coordinates: List[float] (x, y, z)</span>
<span class="sd">    Returns:</span>
<span class="sd">      List[float] (x&#39;, y&#39;, z&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">vector_transform</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.to_dict">
    <p>def <span class="ident">to_dict</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.to_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.to_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;vertices&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vertices</span><span class="p">,</span>
        <span class="s2">&quot;normals&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_normals</span><span class="p">,</span>
        <span class="s2">&quot;texcoords&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_texcoords</span><span class="p">,</span>
        <span class="s2">&quot;matrix&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span>
        <span class="s2">&quot;materials&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">mat</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span><span class="p">[</span><span class="n">mat</span><span class="p">]</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">for</span> <span class="n">mat</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">materials</span>
        <span class="p">},</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">cast</span><span class="p">(</span><span class="n">Mesh</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">])</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">Mesh</span><span class="p">)</span>
        <span class="p">},</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.to_json">
    <p>def <span class="ident">to_json</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.to_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.to_json" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.toggle_wireframe">
    <p>def <span class="ident">toggle_wireframe</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Toggle wireframe view of the Object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.toggle_wireframe', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.toggle_wireframe" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">toggle_wireframe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Toggle wireframe view of the Object&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span>
    <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">%</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">display</span> <span class="o">=</span> <span class="n">d</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">toggle_wireframe</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.track">
    <p>def <span class="ident">track</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Track object motion</p>
<p>Returns:
    bool: <code>True</code> on successful tracking of <code>self</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.track', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.track" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">track</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Track object motion</span>
<span class="sd">    Returns:</span>
<span class="sd">        bool: `True` on successful tracking of `self`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_motion</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># Add the new matrix to motion path records</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">))</span>
    <span class="c1"># Add the matrix position to motion math line for visualisation</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_motion_path_line</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[[</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="p">)</span>
    <span class="c1"># Python trick here! need to .copy or it will pass reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_previous_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.update_matrix">
    <p>def <span class="ident">update_matrix</span>(</p><p>self, parent_matrix=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Update matrix</p>
<p>Turn object matrix into numpy array.</p>
<p>Args:
  parent_matrix: Parent objects matrix</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.update_matrix', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.update_matrix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_matrix</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">parent_matrix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Update matrix</span>
<span class="sd">    Turn object matrix into numpy array.</span>
<span class="sd">    Args:</span>
<span class="sd">      parent_matrix: Parent objects matrix</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Turn matrix into numpy array. Numpy arrays are C Type arrays</span>
    <span class="c1"># suitable for OpenGL Pipeline</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
    <span class="c1"># When there is a parent object, child object follows parents matrix</span>
    <span class="k">if</span> <span class="n">parent_matrix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_matrix</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">parent_matrix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.bounding_radius" class="name">var <span class="ident">bounding_radius</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Mesh">Mesh</a></code>.<code><a href="#payton.scene.geometry.Mesh.bounding_radius">bounding_radius</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Return bounding radius</p>
<p>This property function <em>WILL NOT</em> update the previously
calculated value. If you add vertices to the object, you must call
<a href="base.m.html#payton.scene.geometry.base.Object.refresh"><code>payton.scene.geometry.base.Object.refresh</code></a> function to get radius
and the whole object updated.</p>
<p>Returns:
  float</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.direction" class="name">var <span class="ident">direction</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#payton.scene.geometry.Object">Object</a></code>.<code><a href="#payton.scene.geometry.Object.direction">direction</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Get direction vector from Matrix</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.has_missing_vao" class="name">var <span class="ident">has_missing_vao</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.material" class="name">var <span class="ident">material</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.position" class="name">var <span class="ident">position</span></p>
            

            
  
    <div class="desc"><p>Get position of the Object.</p>
<p>Return matrix position list</p>
<p>Returns:
  List[float]</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="payton.scene.geometry.Wavefront.visible" class="name">var <span class="ident">visible</span></p>
            

            
  
    <div class="desc"><p>Check if object is visible</p>
<p>Returns:
  bool: <code>True</code> if visible.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.from_dict">
    <p>def <span class="ident">from_dict</span>(</p><p>cls, d)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.from_dict', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.from_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">res</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_vertices</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;vertices&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_normals</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;normals&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">_texcoords</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;texcoords&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">matrix</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;matrix&quot;</span><span class="p">]</span>
    <span class="n">res</span><span class="o">.</span><span class="n">materials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">Material</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;materials&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">res</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">][</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s2">&quot;children&quot;</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="payton.scene.geometry.Wavefront.from_json">
    <p>def <span class="ident">from_json</span>(</p><p>cls, jstr)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-payton.scene.geometry.Wavefront.from_json', this);">Show source &equiv;</a></p>
  <div id="source-payton.scene.geometry.Wavefront.from_json" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_json</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">jstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Mesh&quot;</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">jstr</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

    <h2 class="section-title" id="header-submodules">Sub-modules</h2>
      <div class="item">
      <p class="name"><a href="base.m.html">payton.scene.geometry.base</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="cube.m.html">payton.scene.geometry.cube</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="cylinder.m.html">payton.scene.geometry.cylinder</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="export.m.html">payton.scene.geometry.export</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="md2.m.html">payton.scene.geometry.md2</a></p>
      
  
    <div class="desc"><p>ID Software Quake 2 Model File
Some parts of this file is based on the original work from:
https://github.com/adamlwgriffiths/PyMesh/tree/master/pymesh/md2</p></div>

      </div>
      <div class="item">
      <p class="name"><a href="mesh.m.html">payton.scene.geometry.mesh</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="plane.m.html">payton.scene.geometry.plane</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="point.m.html">payton.scene.geometry.point</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="ragdoll.m.html">payton.scene.geometry.ragdoll</a></p>
      
  
    <div class="desc"><p>Ragdoll Object</p>
<p>Please note that, this is not a complete feature. Most likely many things
are still quite hard to accomplish using RagDoll. But it will be gradually
better in time. It just needs some time. Therefore, I am going to visit
this file every now and then.</p>
<p>Ragdoll is simply a basic skelet...</p></div>

      </div>
      <div class="item">
      <p class="name"><a href="sphere.m.html">payton.scene.geometry.sphere</a></p>
      
  

      </div>
      <div class="item">
      <p class="name"><a href="wavefront.m.html">payton.scene.geometry.wavefront</a></p>
      
  

      </div>
  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
